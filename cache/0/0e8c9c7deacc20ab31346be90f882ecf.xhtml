
<h1 class="sectionedit1" id="creating_custom_items_with_json_and_lua">Creating Custom Items with JSON and Lua</h1>
<div class="level1">

<p>
This guide shows how to create completely new items in Remixed Dungeon without any Java coding. You&#039;ll learn to use JSON configuration and Lua scripting to define new weapons, armor, potions, scrolls, and special items.
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Creating Custom Items with JSON and Lua&quot;,&quot;hid&quot;:&quot;creating_custom_items_with_json_and_lua&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:1,&quot;range&quot;:&quot;1-276&quot;} -->
<h2 class="sectionedit2" id="item_basics">Item Basics</h2>
<div class="level2">

<p>
Every item in Remixed Dungeon is defined by:
</p>
<ul>
<li class="level1"><div class="li"> A JSON file that describes its properties</div>
</li>
<li class="level1"><div class="li"> Optional Lua scripts that define special behaviors</div>
</li>
<li class="level1"><div class="li"> An image file for its sprite</div>
</li>
</ul>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Item Basics&quot;,&quot;hid&quot;:&quot;item_basics&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:2,&quot;range&quot;:&quot;277-481&quot;} -->
<h2 class="sectionedit3" id="simple_itemcustom_weapon">Simple Item: Custom Weapon</h2>
<div class="level2">

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Simple Item: Custom Weapon&quot;,&quot;hid&quot;:&quot;simple_itemcustom_weapon&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:3,&quot;range&quot;:&quot;482-521&quot;} -->
<h3 class="sectionedit4" id="step_1create_the_item_json">Step 1: Create the Item JSON</h3>
<div class="level3">

<p>
Create <code>items/weapon/custom_sword.json</code>:
</p>

<p>
<pre class="code json">{
  &quot;class&quot;: &quot;com.watabou.pixeldungeon.items.weapon.melee.MeleeWeapon&quot;,
  &quot;name:en&quot;: &quot;Lightning Sword&quot;,
  &quot;name:ru&quot;: &quot;Меч молнии&quot;,
  &quot;desc:en&quot;: &quot;This sword crackles with electrical energy that jumps to nearby enemies.&quot;,
  &quot;desc:ru&quot;: &quot;Этот меч искрится электрической энергией, перекачивающейся на ближайших врагов.&quot;,
  &quot;imageIndex&quot;: 15,
  &quot;damageMin&quot;: 6,
  &quot;damageMax&quot;: 12,
  &quot;AC&quot;: &quot;ATTACK&quot;,
  &quot;Tier&quot;: 3,
  &quot;script&quot;: &quot;items/lightning_sword.lua&quot;,
  &quot;onHit&quot;: &quot;lightningStrike&quot;,
  &quot;onEquip&quot;: &quot;equipEffect&quot;,
  &quot;onUnequip&quot;: &quot;unequipEffect&quot;
}</pre>

</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Step 1: Create the Item JSON&quot;,&quot;hid&quot;:&quot;step_1create_the_item_json&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:4,&quot;range&quot;:&quot;522-1239&quot;} -->
<h3 class="sectionedit5" id="step_2create_the_lua_script">Step 2: Create the Lua Script</h3>
<div class="level3">

<p>
Create <code>items/lightning_sword.lua</code>:
</p>

<p>
<pre class="code lua"><span class="kw1">local</span> RPD <span class="sy0">=</span> <span class="kw3">require</span> <span class="st0">&quot;scripts/lib/commonClasses&quot;</span>
<span class="kw1">local</span> item <span class="sy0">=</span> <span class="kw3">require</span> <span class="st0">&quot;scripts/lib/item&quot;</span>
&nbsp;
<span class="kw1">return</span> item<span class="sy0">.</span>init<span class="br0">&#123;</span>
    desc <span class="sy0">=</span> <span class="kw1">function</span><span class="br0">&#40;</span><span class="br0">&#41;</span>
        <span class="kw1">return</span> <span class="br0">&#123;</span>
            image         <span class="sy0">=</span> <span class="nu0">15</span><span class="sy0">,</span>
            imageFile     <span class="sy0">=</span> <span class="st0">&quot;items.png&quot;</span><span class="sy0">,</span>
            name          <span class="sy0">=</span> <span class="st0">&quot;Lightning Sword&quot;</span><span class="sy0">,</span>
            info          <span class="sy0">=</span> <span class="st0">&quot;This sword crackles with electrical energy that jumps to nearby enemies.&quot;</span><span class="sy0">,</span>
            stackable     <span class="sy0">=</span> <span class="kw4">false</span><span class="sy0">,</span>
            upgradable    <span class="sy0">=</span> <span class="kw4">true</span><span class="sy0">,</span>
            isFlies       <span class="sy0">=</span> <span class="kw4">false</span><span class="sy0">,</span>
            defaultAction <span class="sy0">=</span> <span class="st0">&quot;ATTACK&quot;</span>
        <span class="br0">&#125;</span>
    <span class="kw1">end</span><span class="sy0">,</span>
&nbsp;
    <span class="co1">-- Called when the weapon hits an enemy</span>
    attackProc <span class="sy0">=</span> <span class="kw1">function</span><span class="br0">&#40;</span>self<span class="sy0">,</span> cell<span class="sy0">,</span> enemy<span class="sy0">,</span> hero<span class="sy0">,</span> damage<span class="br0">&#41;</span>
        <span class="co1">-- Find nearby enemies (within 2 tiles) using level mobs</span>
        <span class="kw1">local</span> mobs <span class="sy0">=</span> RPD<span class="sy0">.</span>Dungeon<span class="sy0">.</span>level<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">:</span>mobs<span class="br0">&#40;</span><span class="br0">&#41;</span>
        <span class="kw1">for</span> i <span class="sy0">=</span> <span class="nu0">0</span><span class="sy0">,</span> mobs<span class="sy0">:</span>size<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">-</span><span class="nu0">1</span> <span class="kw1">do</span>
            <span class="kw1">local</span> mob <span class="sy0">=</span> mobs<span class="sy0">:</span>get<span class="br0">&#40;</span>i<span class="br0">&#41;</span>
            <span class="kw1">if</span> mob <span class="sy0">~=</span> enemy <span class="kw2">and</span> RPD<span class="sy0">.</span>Dungeon<span class="sy0">.</span>level<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">:</span>distance<span class="br0">&#40;</span>enemy<span class="sy0">:</span>getPos<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">,</span> mob<span class="sy0">:</span>getPos<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span> <span class="sy0">&lt;=</span> <span class="nu0">2</span> <span class="kw1">then</span>
                <span class="kw1">local</span> lightningDamage <span class="sy0">=</span> <span class="kw3">math.random</span><span class="br0">&#40;</span><span class="nu0">1</span><span class="sy0">,</span> <span class="nu0">5</span><span class="br0">&#41;</span>  <span class="co1">-- Apply some damage (actual calculation would be more complex)</span>
                mob<span class="sy0">:</span>damage<span class="br0">&#40;</span>lightningDamage<span class="sy0">,</span> hero<span class="br0">&#41;</span>  <span class="co1">-- Damage mob, source is hero</span>
                RPD<span class="sy0">.</span>glog<span class="br0">&#40;</span><span class="st0">&quot;Lightning arcs to &quot;</span> <span class="sy0">..</span> mob<span class="sy0">:</span>name<span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="sy0">..</span> <span class="st0">&quot;!&quot;</span><span class="br0">&#41;</span>
            <span class="kw1">end</span>
        <span class="kw1">end</span>
&nbsp;
        <span class="co1">-- Show visual effect (using available effect)</span>
        RPD<span class="sy0">.</span>topEffect<span class="br0">&#40;</span>enemy<span class="sy0">:</span>getPos<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">,</span> <span class="st0">&quot;electrical&quot;</span><span class="br0">&#41;</span>
        <span class="kw1">return</span> damage
    <span class="kw1">end</span><span class="sy0">,</span>
&nbsp;
    activate <span class="sy0">=</span> <span class="kw1">function</span><span class="br0">&#40;</span>self<span class="sy0">,</span> item<span class="sy0">,</span> hero<span class="br0">&#41;</span>
        <span class="co1">-- Called when item is equipped</span>
        RPD<span class="sy0">.</span>glog<span class="br0">&#40;</span><span class="st0">&quot;Electricity surges through your body!&quot;</span><span class="br0">&#41;</span>
    <span class="kw1">end</span><span class="sy0">,</span>
&nbsp;
    deactivate <span class="sy0">=</span> <span class="kw1">function</span><span class="br0">&#40;</span>self<span class="sy0">,</span> item<span class="sy0">,</span> hero<span class="br0">&#41;</span>
        <span class="co1">-- Called when item is unequipped</span>
        RPD<span class="sy0">.</span>glog<span class="br0">&#40;</span><span class="st0">&quot;The electrical sensation fades.&quot;</span><span class="br0">&#41;</span>
    <span class="kw1">end</span>
<span class="br0">&#125;</span></pre>

</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Step 2: Create the Lua Script&quot;,&quot;hid&quot;:&quot;step_2create_the_lua_script&quot;,&quot;codeblockOffset&quot;:1,&quot;secid&quot;:5,&quot;range&quot;:&quot;1240-2996&quot;} -->
<h3 class="sectionedit6" id="step_3add_the_sprite">Step 3: Add the Sprite</h3>
<div class="level3">

<p>
Add your custom sword sprite to <code>sprites/items/weapon.png</code> at index 15 (the location specified in <code>imageIndex</code>).
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Step 3: Add the Sprite&quot;,&quot;hid&quot;:&quot;step_3add_the_sprite&quot;,&quot;codeblockOffset&quot;:2,&quot;secid&quot;:6,&quot;range&quot;:&quot;2997-3147&quot;} -->
<h2 class="sectionedit7" id="custom_potion_example">Custom Potion Example</h2>
<div class="level2">

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Custom Potion Example&quot;,&quot;hid&quot;:&quot;custom_potion_example&quot;,&quot;codeblockOffset&quot;:2,&quot;secid&quot;:7,&quot;range&quot;:&quot;3148-3182&quot;} -->
<h3 class="sectionedit8" id="json_definition">JSON Definition</h3>
<div class="level3">

<p>
Create <code>items/potions/custom_potion.json</code>:
</p>

<p>
<pre class="code json">{
  &quot;class&quot;: &quot;com.watabou.pixeldungeon.items.potions.Potion&quot;,
  &quot;name:en&quot;: &quot;Potion of Phase Shift&quot;,
  &quot;name:ru&quot;: &quot;Зелье фазового сдвига&quot;,
  &quot;desc:en&quot;: &quot;Drinking this potion will make you temporarily phase through walls and enemies for a short time.&quot;,
  &quot;desc:ru&quot;: &quot;Выпив это зелье, вы временно будете проходить сквозь стены и врагов в течение короткого времени.&quot;,
  &quot;imageIndex&quot;: 22,
  &quot;script&quot;: &quot;items/potion_phase.lua&quot;,
  &quot;onDrink&quot;: &quot;phaseShift&quot;
}</pre>

</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;JSON Definition&quot;,&quot;hid&quot;:&quot;json_definition&quot;,&quot;codeblockOffset&quot;:2,&quot;secid&quot;:8,&quot;range&quot;:&quot;3183-3824&quot;} -->
<h3 class="sectionedit9" id="lua_script">Lua Script</h3>
<div class="level3">

<p>
Create <code>items/potion_phase.lua</code>:
</p>

<p>
<pre class="code lua"><span class="kw1">local</span> RPD <span class="sy0">=</span> <span class="kw3">require</span> <span class="st0">&quot;scripts/lib/commonClasses&quot;</span>
<span class="kw1">local</span> item <span class="sy0">=</span> <span class="kw3">require</span> <span class="st0">&quot;scripts/lib/item&quot;</span>
&nbsp;
<span class="kw1">return</span> item<span class="sy0">.</span>init<span class="br0">&#123;</span>
    desc <span class="sy0">=</span> <span class="kw1">function</span><span class="br0">&#40;</span><span class="br0">&#41;</span>
        <span class="kw1">return</span> <span class="br0">&#123;</span>
            image         <span class="sy0">=</span> <span class="nu0">22</span><span class="sy0">,</span>
            imageFile     <span class="sy0">=</span> <span class="st0">&quot;items.png&quot;</span><span class="sy0">,</span>
            name          <span class="sy0">=</span> <span class="st0">&quot;Potion of Phase Shift&quot;</span><span class="sy0">,</span>
            info          <span class="sy0">=</span> <span class="st0">&quot;Drinking this potion will make you temporarily phase through walls and enemies for a short time.&quot;</span><span class="sy0">,</span>
            stackable     <span class="sy0">=</span> <span class="kw4">true</span><span class="sy0">,</span>
            upgradable    <span class="sy0">=</span> <span class="kw4">false</span><span class="sy0">,</span>
            isFlies       <span class="sy0">=</span> <span class="kw4">false</span><span class="sy0">,</span>
            defaultAction <span class="sy0">=</span> <span class="st0">&quot;DRINK&quot;</span>
        <span class="br0">&#125;</span>
    <span class="kw1">end</span><span class="sy0">,</span>
&nbsp;
    actions <span class="sy0">=</span> <span class="kw1">function</span><span class="br0">&#40;</span><span class="br0">&#41;</span>
        <span class="kw1">return</span> <span class="br0">&#123;</span>RPD<span class="sy0">.</span>Actions<span class="sy0">.</span>DRINK<span class="br0">&#125;</span>
    <span class="kw1">end</span><span class="sy0">,</span>
&nbsp;
    <span class="kw3">execute</span> <span class="sy0">=</span> <span class="kw1">function</span><span class="br0">&#40;</span>self<span class="sy0">,</span> item<span class="sy0">,</span> hero<span class="sy0">,</span> action<span class="br0">&#41;</span>
        <span class="kw1">if</span> action <span class="sy0">==</span> RPD<span class="sy0">.</span>Actions<span class="sy0">.</span>DRINK <span class="kw1">then</span>
            RPD<span class="sy0">.</span>glog<span class="br0">&#40;</span><span class="st0">&quot;You feel insubstantial!&quot;</span><span class="br0">&#41;</span>
&nbsp;
            <span class="co1">-- Apply phase buff for 10 turns using RPD API</span>
            RPD<span class="sy0">.</span>affectBuff<span class="br0">&#40;</span>hero<span class="sy0">,</span> RPD<span class="sy0">.</span>Buffs<span class="sy0">.</span>Invisibility<span class="sy0">,</span> <span class="nu0">10</span><span class="br0">&#41;</span>  <span class="co1">-- Using invisibility as example buff</span>
&nbsp;
            <span class="co1">-- Show visual effect (using available effect)</span>
            RPD<span class="sy0">.</span>topEffect<span class="br0">&#40;</span>hero<span class="sy0">:</span>getPos<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">,</span> <span class="st0">&quot;wind&quot;</span><span class="br0">&#41;</span>
        <span class="kw1">end</span>
    <span class="kw1">end</span>
<span class="br0">&#125;</span></pre>

</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Lua Script&quot;,&quot;hid&quot;:&quot;lua_script&quot;,&quot;codeblockOffset&quot;:3,&quot;secid&quot;:9,&quot;range&quot;:&quot;3825-4963&quot;} -->
<h3 class="sectionedit10" id="buff_definition">Buff Definition</h3>
<div class="level3">

<p>
Create the buff that enables phasing in <code>buffs/phase_buff.json</code>:
</p>

<p>
<pre class="code json">{
  &quot;class&quot;: &quot;com.watabou.pixeldungeon.actors.buffs.Buff&quot;,
  &quot;name:en&quot;: &quot;Phase&quot;,
  &quot;desc:en&quot;: &quot;You can move through walls and enemies.\nDuration: %d turns&quot;,
  &quot;imageIndex&quot;: 25,
  &quot;script&quot;: &quot;buffs/phase_buff.lua&quot;,
  &quot;onAdd&quot;: &quot;startPhase&quot;,
  &quot;onRemove&quot;: &quot;endPhase&quot;,
  &quot;onStep&quot;: &quot;onStep&quot;
}</pre>

</p>

<p>
And the Lua script <code>buffs/phase_buff.lua</code>:
</p>

<p>
<pre class="code lua"><span class="kw1">local</span> RPD <span class="sy0">=</span> <span class="kw3">require</span> <span class="st0">&quot;scripts/lib/commonClasses&quot;</span>
<span class="kw1">local</span> buff <span class="sy0">=</span> <span class="kw3">require</span> <span class="st0">&quot;scripts/lib/buff&quot;</span>
&nbsp;
<span class="kw1">return</span> buff<span class="sy0">.</span>init<span class="br0">&#123;</span>
    desc <span class="sy0">=</span> <span class="kw1">function</span><span class="br0">&#40;</span><span class="br0">&#41;</span>
        <span class="kw1">return</span> <span class="br0">&#123;</span>
            icon <span class="sy0">=</span> <span class="nu0">25</span><span class="sy0">,</span>
            name <span class="sy0">=</span> <span class="st0">&quot;Phase&quot;</span><span class="sy0">,</span>
            info <span class="sy0">=</span> <span class="st0">&quot;You can move through walls and enemies.<span class="es1">\\</span>nDuration: %d turns&quot;</span>
        <span class="br0">&#125;</span>
    <span class="kw1">end</span><span class="sy0">,</span>
&nbsp;
    attach <span class="sy0">=</span> <span class="kw1">function</span><span class="br0">&#40;</span>self<span class="sy0">,</span> target<span class="br0">&#41;</span>
        <span class="co1">-- Called when buff is applied</span>
        self<span class="sy0">.</span>target <span class="sy0">=</span> target
        RPD<span class="sy0">.</span>glog<span class="br0">&#40;</span><span class="st0">&quot;You phase out of reality!&quot;</span><span class="br0">&#41;</span>
        <span class="kw1">return</span> <span class="kw4">true</span>
    <span class="kw1">end</span><span class="sy0">,</span>
&nbsp;
    act <span class="sy0">=</span> <span class="kw1">function</span><span class="br0">&#40;</span>self<span class="br0">&#41;</span>
        <span class="co1">-- Called each turn while active</span>
        <span class="co1">-- Visual effect each step</span>
        RPD<span class="sy0">.</span>topEffect<span class="br0">&#40;</span>self<span class="sy0">.</span>target<span class="sy0">:</span>getPos<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">,</span> <span class="st0">&quot;step&quot;</span><span class="br0">&#41;</span>
        <span class="co1">-- Continue for another turn</span>
        <span class="kw1">return</span> <span class="kw4">true</span>
    <span class="kw1">end</span><span class="sy0">,</span>
&nbsp;
    detach <span class="sy0">=</span> <span class="kw1">function</span><span class="br0">&#40;</span>self<span class="br0">&#41;</span>
        <span class="co1">-- Called when buff is removed</span>
        RPD<span class="sy0">.</span>glog<span class="br0">&#40;</span><span class="st0">&quot;You phase back into reality.&quot;</span><span class="br0">&#41;</span>
    <span class="kw1">end</span>
<span class="br0">&#125;</span></pre>

</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Buff Definition&quot;,&quot;hid&quot;:&quot;buff_definition&quot;,&quot;codeblockOffset&quot;:4,&quot;secid&quot;:10,&quot;range&quot;:&quot;4964-6256&quot;} -->
<h2 class="sectionedit11" id="custom_scroll_example">Custom Scroll Example</h2>
<div class="level2">

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Custom Scroll Example&quot;,&quot;hid&quot;:&quot;custom_scroll_example&quot;,&quot;codeblockOffset&quot;:6,&quot;secid&quot;:11,&quot;range&quot;:&quot;6257-6291&quot;} -->
<h3 class="sectionedit12" id="json_definition1">JSON Definition</h3>
<div class="level3">

<p>
Create <code>items/scrolls/custom_scroll.json</code>:
</p>

<p>
<pre class="code json">{
  &quot;class&quot;: &quot;com.watabou.pixeldungeon.items.scrolls.Scroll&quot;,
  &quot;name:en&quot;: &quot;Scroll of Telepathy&quot;,
  &quot;name:ru&quot;: &quot;Свиток телепатии&quot;,
  &quot;desc:en&quot;: &quot;Reading this scroll will allow you to sense the minds of all creatures for a time, revealing their location and basic information.&quot;,
  &quot;desc:ru&quot;: &quot;Прочтение этого свитка позволит вам ощущать разум всех существ некоторое время, раскрывая их местоположение и базовую информацию.&quot;,
  &quot;imageIndex&quot;: 12,
  &quot;script&quot;: &quot;items/scroll_telepathy.lua&quot;,
  &quot;onRead&quot;: &quot;activateTelepathy&quot;
}</pre>

</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;JSON Definition&quot;,&quot;hid&quot;:&quot;json_definition1&quot;,&quot;codeblockOffset&quot;:6,&quot;secid&quot;:12,&quot;range&quot;:&quot;6292-7030&quot;} -->
<h3 class="sectionedit13" id="lua_script1">Lua Script</h3>
<div class="level3">

<p>
Create <code>items/scroll_telepathy.lua</code>:
</p>

<p>
<pre class="code lua"><span class="kw1">local</span> RPD <span class="sy0">=</span> <span class="kw3">require</span> <span class="st0">&quot;scripts/lib/commonClasses&quot;</span>
<span class="kw1">local</span> item <span class="sy0">=</span> <span class="kw3">require</span> <span class="st0">&quot;scripts/lib/item&quot;</span>
&nbsp;
<span class="kw1">return</span> item<span class="sy0">.</span>init<span class="br0">&#123;</span>
    desc <span class="sy0">=</span> <span class="kw1">function</span><span class="br0">&#40;</span><span class="br0">&#41;</span>
        <span class="kw1">return</span> <span class="br0">&#123;</span>
            image         <span class="sy0">=</span> <span class="nu0">12</span><span class="sy0">,</span>
            imageFile     <span class="sy0">=</span> <span class="st0">&quot;items.png&quot;</span><span class="sy0">,</span>
            name          <span class="sy0">=</span> <span class="st0">&quot;Scroll of Telepathy&quot;</span><span class="sy0">,</span>
            info          <span class="sy0">=</span> <span class="st0">&quot;Reading this scroll will allow you to sense the minds of all creatures for a time, revealing their location and basic information.&quot;</span><span class="sy0">,</span>
            stackable     <span class="sy0">=</span> <span class="kw4">true</span><span class="sy0">,</span>
            upgradable    <span class="sy0">=</span> <span class="kw4">false</span><span class="sy0">,</span>
            isFlies       <span class="sy0">=</span> <span class="kw4">false</span><span class="sy0">,</span>
            defaultAction <span class="sy0">=</span> <span class="st0">&quot;READ&quot;</span>
        <span class="br0">&#125;</span>
    <span class="kw1">end</span><span class="sy0">,</span>
&nbsp;
    actions <span class="sy0">=</span> <span class="kw1">function</span><span class="br0">&#40;</span><span class="br0">&#41;</span>
        <span class="kw1">return</span> <span class="br0">&#123;</span>RPD<span class="sy0">.</span>Actions<span class="sy0">.</span>READ<span class="br0">&#125;</span>
    <span class="kw1">end</span><span class="sy0">,</span>
&nbsp;
    <span class="kw3">execute</span> <span class="sy0">=</span> <span class="kw1">function</span><span class="br0">&#40;</span>self<span class="sy0">,</span> scroll<span class="sy0">,</span> hero<span class="sy0">,</span> action<span class="br0">&#41;</span>
        <span class="kw1">if</span> action <span class="sy0">==</span> RPD<span class="sy0">.</span>Actions<span class="sy0">.</span>READ <span class="kw1">then</span>
            RPD<span class="sy0">.</span>glog<span class="br0">&#40;</span><span class="st0">&quot;You can feel the minds of all creatures!&quot;</span><span class="br0">&#41;</span>
&nbsp;
            <span class="co1">-- Apply telepathy buff for 20 turns</span>
            RPD<span class="sy0">.</span>affectBuff<span class="br0">&#40;</span>hero<span class="sy0">,</span> RPD<span class="sy0">.</span>Buffs<span class="sy0">.</span>MindVision<span class="sy0">,</span> <span class="nu0">20</span><span class="br0">&#41;</span>  <span class="co1">-- Using MindVision as example buff</span>
&nbsp;
            <span class="co1">-- Show visual effect</span>
            RPD<span class="sy0">.</span>topEffect<span class="br0">&#40;</span>hero<span class="sy0">:</span>getPos<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">,</span> <span class="st0">&quot;telepathy&quot;</span><span class="br0">&#41;</span>
        <span class="kw1">end</span>
    <span class="kw1">end</span>
<span class="br0">&#125;</span></pre>

</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Lua Script&quot;,&quot;hid&quot;:&quot;lua_script1&quot;,&quot;codeblockOffset&quot;:7,&quot;secid&quot;:13,&quot;range&quot;:&quot;7031-8187&quot;} -->
<h3 class="sectionedit14" id="telepathy_buff">Telepathy Buff</h3>
<div class="level3">

<p>
Create <code>buffs/telepathy_buff.json</code>:
</p>

<p>
<pre class="code json">{
  &quot;class&quot;: &quot;com.watabou.pixeldungeon.actors.buffs.Buff&quot;,
  &quot;name:en&quot;: &quot;Telepathy&quot;,
  &quot;desc:en&quot;: &quot;You can sense the minds of all creatures.\nDuration: %d turns&quot;,
  &quot;imageIndex&quot;: 26,
  &quot;script&quot;: &quot;buffs/telepathy_buff.lua&quot;,
  &quot;onAdd&quot;: &quot;startTelepathy&quot;,
  &quot;onRemove&quot;: &quot;endTelepathy&quot;,
  &quot;onTurn&quot;: &quot;updateTelepathy&quot;
}</pre>

</p>

<p>
And <code>buffs/telepathy_buff.lua</code>:
</p>

<p>
<pre class="code lua"><span class="kw1">local</span> RPD <span class="sy0">=</span> <span class="kw3">require</span> <span class="st0">&quot;scripts/lib/commonClasses&quot;</span>
<span class="kw1">local</span> M <span class="sy0">=</span> <span class="br0">&#123;</span><span class="br0">&#125;</span>
&nbsp;
<span class="kw1">function</span> M<span class="sy0">.</span>startTelepathy<span class="br0">&#40;</span>buff<span class="sy0">,</span> target<span class="br0">&#41;</span>
    RPD<span class="sy0">.</span>glog<span class="br0">&#40;</span><span class="st0">&quot;You can sense minds throughout the dungeon!&quot;</span><span class="br0">&#41;</span>
<span class="kw1">end</span>
&nbsp;
<span class="kw1">function</span> M<span class="sy0">.</span>endTelepathy<span class="br0">&#40;</span>buff<span class="sy0">,</span> target<span class="br0">&#41;</span>
    RPD<span class="sy0">.</span>glog<span class="br0">&#40;</span><span class="st0">&quot;The mental noise fades.&quot;</span><span class="br0">&#41;</span>
<span class="kw1">end</span>
&nbsp;
<span class="kw1">function</span> M<span class="sy0">.</span>updateTelepathy<span class="br0">&#40;</span>buff<span class="sy0">,</span> target<span class="br0">&#41;</span>
    <span class="co1">-- Reveal all creatures on the level every few turns</span>
    <span class="co1">-- Note: This effect would depend on specific game mechanics - this is conceptual</span>
    <span class="kw1">local</span> level <span class="sy0">=</span> RPD<span class="sy0">.</span>Dungeon<span class="sy0">.</span>level<span class="br0">&#40;</span><span class="br0">&#41;</span>
    <span class="kw1">local</span> mobs <span class="sy0">=</span> level<span class="sy0">:</span>mobs<span class="br0">&#40;</span><span class="br0">&#41;</span>
    <span class="kw1">for</span> i <span class="sy0">=</span> <span class="nu0">0</span><span class="sy0">,</span> mobs<span class="sy0">:</span>size<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">-</span><span class="nu0">1</span> <span class="kw1">do</span>
        <span class="kw1">local</span> mob <span class="sy0">=</span> mobs<span class="sy0">:</span>get<span class="br0">&#40;</span>i<span class="br0">&#41;</span>
        <span class="co1">-- Reveal 1 tile around mob (conceptual implementation)</span>
    <span class="kw1">end</span>
<span class="kw1">end</span>
&nbsp;
<span class="kw1">return</span> M</pre>

</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Telepathy Buff&quot;,&quot;hid&quot;:&quot;telepathy_buff&quot;,&quot;codeblockOffset&quot;:8,&quot;secid&quot;:14,&quot;range&quot;:&quot;8188-9293&quot;} -->
<h2 class="sectionedit15" id="custom_armor_example">Custom Armor Example</h2>
<div class="level2">

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Custom Armor Example&quot;,&quot;hid&quot;:&quot;custom_armor_example&quot;,&quot;codeblockOffset&quot;:10,&quot;secid&quot;:15,&quot;range&quot;:&quot;9294-9327&quot;} -->
<h3 class="sectionedit16" id="json_definition2">JSON Definition</h3>
<div class="level3">

<p>
Create <code>items/armor/custom_armor.json</code>:
</p>

<p>
<pre class="code json">{
  &quot;class&quot;: &quot;com.watabou.pixeldungeon.items.armor.Armor&quot;,
  &quot;name:en&quot;: &quot;Shielding Armor&quot;,
  &quot;name:ru&quot;: &quot;Экранирующая броня&quot;,
  &quot;desc:en&quot;: &quot;This armor glows with a protective field that sometimes blocks attacks completely.&quot;,
  &quot;desc:ru&quot;: &quot;Эта броня светится защитным полем, которое иногда полностью блокирует атаки.&quot;,
  &quot;imageIndex&quot;: 8,
  &quot;AC&quot;: &quot;EQUIP&quot;,
  &quot;Tier&quot;: 4,
  &quot;baseDefenseFactor&quot;: 12,
  &quot;script&quot;: &quot;items/armor_shielding.lua&quot;,
  &quot;onHit&quot;: &quot;tryBlock&quot;,
  &quot;onEquip&quot;: &quot;equipEffect&quot;
}</pre>

</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;JSON Definition&quot;,&quot;hid&quot;:&quot;json_definition2&quot;,&quot;codeblockOffset&quot;:10,&quot;secid&quot;:16,&quot;range&quot;:&quot;9328-9986&quot;} -->
<h3 class="sectionedit17" id="lua_script2">Lua Script</h3>
<div class="level3">

<p>
Create <code>items/armor_shielding.lua</code>:
</p>

<p>
<pre class="code lua"><span class="kw1">local</span> RPD <span class="sy0">=</span> <span class="kw3">require</span> <span class="st0">&quot;scripts/lib/commonClasses&quot;</span>
<span class="kw1">local</span> item <span class="sy0">=</span> <span class="kw3">require</span> <span class="st0">&quot;scripts/lib/item&quot;</span>
&nbsp;
<span class="kw1">return</span> item<span class="sy0">.</span>init<span class="br0">&#123;</span>
    desc <span class="sy0">=</span> <span class="kw1">function</span><span class="br0">&#40;</span><span class="br0">&#41;</span>
        <span class="kw1">return</span> <span class="br0">&#123;</span>
            image         <span class="sy0">=</span> <span class="nu0">8</span><span class="sy0">,</span>
            imageFile     <span class="sy0">=</span> <span class="st0">&quot;items.png&quot;</span><span class="sy0">,</span>
            name          <span class="sy0">=</span> <span class="st0">&quot;Shielding Armor&quot;</span><span class="sy0">,</span>
            info          <span class="sy0">=</span> <span class="st0">&quot;This armor glows with a protective field that sometimes blocks attacks completely.&quot;</span><span class="sy0">,</span>
            stackable     <span class="sy0">=</span> <span class="kw4">false</span><span class="sy0">,</span>
            upgradable    <span class="sy0">=</span> <span class="kw4">true</span><span class="sy0">,</span>
            isFlies       <span class="sy0">=</span> <span class="kw4">false</span><span class="sy0">,</span>
            defaultAction <span class="sy0">=</span> <span class="st0">&quot;EQUIP&quot;</span>
        <span class="br0">&#125;</span>
    <span class="kw1">end</span><span class="sy0">,</span>
&nbsp;
    defenceProc <span class="sy0">=</span> <span class="kw1">function</span><span class="br0">&#40;</span>self<span class="sy0">,</span> enemy<span class="sy0">,</span> damage<span class="br0">&#41;</span>
        <span class="co1">-- 25% chance to completely block the attack</span>
        <span class="kw1">if</span> <span class="kw3">math.random</span><span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="sy0">&lt;</span> <span class="nu0">0.25</span> <span class="kw1">then</span>  <span class="co1">-- 25% chance</span>
            RPD<span class="sy0">.</span>glog<span class="br0">&#40;</span><span class="st0">&quot;Your armor's shield blocks the attack!&quot;</span><span class="br0">&#41;</span>
            RPD<span class="sy0">.</span>topEffect<span class="br0">&#40;</span>self<span class="sy0">:</span>getOwner<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">:</span>getPos<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">,</span> <span class="st0">&quot;shield&quot;</span><span class="br0">&#41;</span>  <span class="co1">-- Use available effect</span>
            <span class="kw1">return</span> <span class="nu0">0</span> <span class="co1">-- Reduce damage to 0</span>
        <span class="kw1">end</span>
        <span class="kw1">return</span> damage <span class="co1">-- Return original damage if not blocked</span>
    <span class="kw1">end</span><span class="sy0">,</span>
&nbsp;
    activate <span class="sy0">=</span> <span class="kw1">function</span><span class="br0">&#40;</span>self<span class="sy0">,</span> item<span class="sy0">,</span> hero<span class="br0">&#41;</span>
        RPD<span class="sy0">.</span>glog<span class="br0">&#40;</span><span class="st0">&quot;A protective field envelops you.&quot;</span><span class="br0">&#41;</span>
    <span class="kw1">end</span>
<span class="br0">&#125;</span></pre>

</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Lua Script&quot;,&quot;hid&quot;:&quot;lua_script2&quot;,&quot;codeblockOffset&quot;:11,&quot;secid&quot;:17,&quot;range&quot;:&quot;9987-11141&quot;} -->
<h2 class="sectionedit18" id="advanced_item_techniques">Advanced Item Techniques</h2>
<div class="level2">

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Advanced Item Techniques&quot;,&quot;hid&quot;:&quot;advanced_item_techniques&quot;,&quot;codeblockOffset&quot;:12,&quot;secid&quot;:18,&quot;range&quot;:&quot;11142-11179&quot;} -->
<h3 class="sectionedit19" id="item_sets">Item Sets</h3>
<div class="level3">

<p>
Create items that work together:
</p>

<p>
<pre class="code json">{
  &quot;class&quot;: &quot;com.watabou.pixeldungeon.items.weapon.melee.Sword&quot;,
  &quot;name:en&quot;: &quot;Sword of Elements&quot;,
  &quot;set&quot;: &quot;elemental_weapons&quot;,
  &quot;enchantments&quot;: [&quot;fire&quot;, &quot;ice&quot;, &quot;shock&quot;],
  &quot;script&quot;: &quot;items/elemental_sword.lua&quot;,
  &quot;onHit&quot;: &quot;applyElement&quot;
}</pre>

</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Item Sets&quot;,&quot;hid&quot;:&quot;item_sets&quot;,&quot;codeblockOffset&quot;:12,&quot;secid&quot;:19,&quot;range&quot;:&quot;11180-11497&quot;} -->
<h3 class="sectionedit20" id="conditional_behavior">Conditional Behavior</h3>
<div class="level3">

<p>
Use Lua to create context-sensitive items:
</p>

<p>
<pre class="code lua"><span class="kw1">local</span> RPD <span class="sy0">=</span> <span class="kw3">require</span> <span class="st0">&quot;scripts/lib/commonClasses&quot;</span>
<span class="kw1">local</span> item <span class="sy0">=</span> <span class="kw3">require</span> <span class="st0">&quot;scripts/lib/item&quot;</span>
&nbsp;
<span class="kw1">return</span> item<span class="sy0">.</span>init<span class="br0">&#123;</span>
    desc <span class="sy0">=</span> <span class="kw1">function</span><span class="br0">&#40;</span><span class="br0">&#41;</span>
        <span class="kw1">return</span> <span class="br0">&#123;</span>
            image         <span class="sy0">=</span> <span class="nu0">0</span><span class="sy0">,</span>
            imageFile     <span class="sy0">=</span> <span class="st0">&quot;items.png&quot;</span><span class="sy0">,</span>
            name          <span class="sy0">=</span> <span class="st0">&quot;Conditional Item&quot;</span><span class="sy0">,</span>
            info          <span class="sy0">=</span> <span class="st0">&quot;An item with context-sensitive effects.&quot;</span><span class="sy0">,</span>
            stackable     <span class="sy0">=</span> <span class="kw4">false</span><span class="sy0">,</span>
            upgradable    <span class="sy0">=</span> <span class="kw4">true</span><span class="sy0">,</span>
            isFlies       <span class="sy0">=</span> <span class="kw4">false</span><span class="sy0">,</span>
            defaultAction <span class="sy0">=</span> <span class="st0">&quot;USE&quot;</span>
        <span class="br0">&#125;</span>
    <span class="kw1">end</span><span class="sy0">,</span>
&nbsp;
    actions <span class="sy0">=</span> <span class="kw1">function</span><span class="br0">&#40;</span><span class="br0">&#41;</span>
        <span class="kw1">return</span> <span class="br0">&#123;</span>RPD<span class="sy0">.</span>Actions<span class="sy0">.</span>USE<span class="br0">&#125;</span>
    <span class="kw1">end</span><span class="sy0">,</span>
&nbsp;
    <span class="kw3">execute</span> <span class="sy0">=</span> <span class="kw1">function</span><span class="br0">&#40;</span>self<span class="sy0">,</span> item<span class="sy0">,</span> hero<span class="sy0">,</span> action<span class="br0">&#41;</span>
        <span class="kw1">if</span> action <span class="sy0">==</span> RPD<span class="sy0">.</span>Actions<span class="sy0">.</span>USE <span class="kw1">then</span>
            <span class="kw1">local</span> level <span class="sy0">=</span> RPD<span class="sy0">.</span>Dungeon<span class="sy0">.</span>level<span class="br0">&#40;</span><span class="br0">&#41;</span>
            <span class="kw1">local</span> heroHP <span class="sy0">=</span> hero<span class="sy0">:</span>getHP<span class="br0">&#40;</span><span class="br0">&#41;</span>
            <span class="kw1">local</span> heroMaxHP <span class="sy0">=</span> hero<span class="sy0">:</span>getMaxHP<span class="br0">&#40;</span><span class="br0">&#41;</span>
&nbsp;
            <span class="kw1">if</span> level<span class="sy0">:</span>getDepth<span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="sy0">&lt;</span> <span class="nu0">5</span> <span class="kw1">then</span>
                <span class="co1">-- Stronger effect on early levels</span>
                hero<span class="sy0">:</span>heal<span class="br0">&#40;</span><span class="nu0">10</span><span class="sy0">,</span> item<span class="br0">&#41;</span>  <span class="co1">-- Heal hero, source is item</span>
                RPD<span class="sy0">.</span>glog<span class="br0">&#40;</span><span class="st0">&quot;The item glows brighter in the early dungeon!&quot;</span><span class="br0">&#41;</span>
            <span class="kw1">elseif</span> heroHP <span class="sy0">&lt;</span> heroMaxHP <span class="sy0">*</span> <span class="nu0">0.3</span> <span class="kw1">then</span>
                <span class="co1">-- Emergency healing when low on health</span>
                hero<span class="sy0">:</span>heal<span class="br0">&#40;</span><span class="nu0">15</span><span class="sy0">,</span> item<span class="br0">&#41;</span>  <span class="co1">-- Heal hero, source is item</span>
                RPD<span class="sy0">.</span>glog<span class="br0">&#40;</span><span class="st0">&quot;Desperation triggers the item's power!&quot;</span><span class="br0">&#41;</span>
            <span class="kw1">else</span>
                <span class="co1">-- Normal effect</span>
                hero<span class="sy0">:</span>heal<span class="br0">&#40;</span><span class="nu0">5</span><span class="sy0">,</span> item<span class="br0">&#41;</span>  <span class="co1">-- Heal hero, source is item</span>
            <span class="kw1">end</span>
        <span class="kw1">end</span>
    <span class="kw1">end</span>
<span class="br0">&#125;</span></pre>

</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Conditional Behavior&quot;,&quot;hid&quot;:&quot;conditional_behavior&quot;,&quot;codeblockOffset&quot;:13,&quot;secid&quot;:20,&quot;range&quot;:&quot;11498-13002&quot;} -->
<h3 class="sectionedit21" id="complex_interactions">Complex Interactions</h3>
<div class="level3">

<p>
Create items that interact with the environment:
</p>

<p>
<pre class="code lua"><span class="kw1">local</span> RPD <span class="sy0">=</span> <span class="kw3">require</span> <span class="st0">&quot;scripts/lib/commonClasses&quot;</span>
<span class="kw1">local</span> item <span class="sy0">=</span> <span class="kw3">require</span> <span class="st0">&quot;scripts/lib/item&quot;</span>
&nbsp;
<span class="kw1">return</span> item<span class="sy0">.</span>init<span class="br0">&#123;</span>
    desc <span class="sy0">=</span> <span class="kw1">function</span><span class="br0">&#40;</span><span class="br0">&#41;</span>
        <span class="kw1">return</span> <span class="br0">&#123;</span>
            image         <span class="sy0">=</span> <span class="nu0">0</span><span class="sy0">,</span>
            imageFile     <span class="sy0">=</span> <span class="st0">&quot;items.png&quot;</span><span class="sy0">,</span>
            name          <span class="sy0">=</span> <span class="st0">&quot;Environment Item&quot;</span><span class="sy0">,</span>
            info          <span class="sy0">=</span> <span class="st0">&quot;An item that interacts with the environment.&quot;</span><span class="sy0">,</span>
            stackable     <span class="sy0">=</span> <span class="kw4">false</span><span class="sy0">,</span>
            upgradable    <span class="sy0">=</span> <span class="kw4">false</span><span class="sy0">,</span>
            isFlies       <span class="sy0">=</span> <span class="kw4">true</span><span class="sy0">,</span>
            defaultAction <span class="sy0">=</span> <span class="st0">&quot;THROW&quot;</span>
        <span class="br0">&#125;</span>
    <span class="kw1">end</span><span class="sy0">,</span>
&nbsp;
    onThrow <span class="sy0">=</span> <span class="kw1">function</span><span class="br0">&#40;</span>self<span class="sy0">,</span> cell<span class="sy0">,</span> user<span class="br0">&#41;</span>
        <span class="kw1">local</span> level <span class="sy0">=</span> RPD<span class="sy0">.</span>Dungeon<span class="sy0">.</span>level<span class="br0">&#40;</span><span class="br0">&#41;</span>
        <span class="kw1">local</span> terrainType <span class="sy0">=</span> level<span class="sy0">:</span>cell<span class="br0">&#40;</span>cell<span class="br0">&#41;</span>
&nbsp;
        <span class="kw1">if</span> terrainType <span class="sy0">==</span> RPD<span class="sy0">.</span>Terrain<span class="sy0">.</span>WATER <span class="kw1">then</span>
            <span class="co1">-- Create a temporary bridge</span>
            level<span class="sy0">:</span>set<span class="br0">&#40;</span>cell<span class="sy0">,</span> RPD<span class="sy0">.</span>Terrain<span class="sy0">.</span>EMPTY<span class="br0">&#41;</span>
            RPD<span class="sy0">.</span>glog<span class="br0">&#40;</span><span class="st0">&quot;The water parts before you!&quot;</span><span class="br0">&#41;</span>
        <span class="kw1">elseif</span> terrainType <span class="sy0">==</span> RPD<span class="sy0">.</span>Terrain<span class="sy0">.</span>CHASM <span class="kw1">then</span>
            <span class="co1">-- Fill the chasm</span>
            level<span class="sy0">:</span>set<span class="br0">&#40;</span>cell<span class="sy0">,</span> RPD<span class="sy0">.</span>Terrain<span class="sy0">.</span>EMPTY<span class="br0">&#41;</span>
            RPD<span class="sy0">.</span>glog<span class="br0">&#40;</span><span class="st0">&quot;A bridge of crystal forms!&quot;</span><span class="br0">&#41;</span>
        <span class="kw1">end</span>
    <span class="kw1">end</span>
<span class="br0">&#125;</span></pre>

</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Complex Interactions&quot;,&quot;hid&quot;:&quot;complex_interactions&quot;,&quot;codeblockOffset&quot;:14,&quot;secid&quot;:21,&quot;range&quot;:&quot;13003-14126&quot;} -->
<h2 class="sectionedit22" id="testing_your_items">Testing Your Items</h2>
<div class="level2">

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Testing Your Items&quot;,&quot;hid&quot;:&quot;testing_your_items&quot;,&quot;codeblockOffset&quot;:15,&quot;secid&quot;:22,&quot;range&quot;:&quot;14127-14158&quot;} -->
<h3 class="sectionedit23" id="common_testing_steps">Common Testing Steps</h3>
<div class="level3">
<ul>
<li class="level1"><div class="li"> Enable your mod in-game</div>
</li>
<li class="level1"><div class="li"> Start a new game (not a saved game) to see new items</div>
</li>
<li class="level1"><div class="li"> Verify that sprites appear correctly</div>
</li>
<li class="level1"><div class="li"> Test all item functions and Lua scripts</div>
</li>
<li class="level1"><div class="li"> Check that item descriptions are properly localized</div>
</li>
<li class="level1"><div class="li"> Confirm that item balancing is appropriate</div>
</li>
</ul>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Common Testing Steps&quot;,&quot;hid&quot;:&quot;common_testing_steps&quot;,&quot;codeblockOffset&quot;:15,&quot;secid&quot;:23,&quot;range&quot;:&quot;14159-14463&quot;} -->
<h3 class="sectionedit24" id="debugging_tips">Debugging Tips</h3>
<div class="level3">
<ul>
<li class="level1"><div class="li"> Check the game log for Lua errors</div>
</li>
<li class="level1"><div class="li"> Verify file paths match the expected directory structure</div>
</li>
<li class="level1"><div class="li"> Ensure JSON syntax is valid</div>
</li>
<li class="level1"><div class="li"> Make sure image indices correspond to actual sprite locations</div>
</li>
</ul>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Debugging Tips&quot;,&quot;hid&quot;:&quot;debugging_tips&quot;,&quot;codeblockOffset&quot;:15,&quot;secid&quot;:24,&quot;range&quot;:&quot;14464-14686&quot;} -->
<h2 class="sectionedit25" id="testing_your_items1">Testing Your Items</h2>
<div class="level2">

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Testing Your Items&quot;,&quot;hid&quot;:&quot;testing_your_items1&quot;,&quot;codeblockOffset&quot;:15,&quot;secid&quot;:25,&quot;range&quot;:&quot;14687-14718&quot;} -->
<h3 class="sectionedit26" id="common_testing_steps1">Common Testing Steps</h3>
<div class="level3">
<ul>
<li class="level1"><div class="li"> Enable your mod in-game</div>
</li>
<li class="level1"><div class="li"> Start a new game (not a saved game) to see new items</div>
</li>
<li class="level1"><div class="li"> Verify that sprites appear correctly</div>
</li>
<li class="level1"><div class="li"> Test all item functions and Lua scripts</div>
</li>
<li class="level1"><div class="li"> Check that item descriptions are properly localized</div>
</li>
<li class="level1"><div class="li"> Confirm that item balancing is appropriate</div>
</li>
</ul>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Common Testing Steps&quot;,&quot;hid&quot;:&quot;common_testing_steps1&quot;,&quot;codeblockOffset&quot;:15,&quot;secid&quot;:26,&quot;range&quot;:&quot;14719-15023&quot;} -->
<h3 class="sectionedit27" id="debugging_tips1">Debugging Tips</h3>
<div class="level3">
<ul>
<li class="level1"><div class="li"> Check the game log for Lua errors</div>
</li>
<li class="level1"><div class="li"> Verify file paths match the expected directory structure</div>
</li>
<li class="level1"><div class="li"> Ensure the <code>desc()</code> function returns all required properties</div>
</li>
<li class="level1"><div class="li"> Make sure image indices correspond to actual sprite locations</div>
</li>
</ul>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Debugging Tips&quot;,&quot;hid&quot;:&quot;debugging_tips1&quot;,&quot;codeblockOffset&quot;:15,&quot;secid&quot;:27,&quot;range&quot;:&quot;15024-15281&quot;} -->
<h2 class="sectionedit28" id="code_references">Code References</h2>
<div class="level2">

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Code References&quot;,&quot;hid&quot;:&quot;code_references&quot;,&quot;codeblockOffset&quot;:15,&quot;secid&quot;:28,&quot;range&quot;:&quot;15282-15310&quot;} -->
<h3 class="sectionedit29" id="core_implementation">Core Implementation</h3>
<div class="level3">

<p>
- <strong>Java Class</strong>: <code>RemixedDungeon/src/main/java/com/nyrds/pixeldungeon/items/CustomItem.java</code>
- <strong>Lua Library</strong>: <code>RemixedDungeon/src/main/assets/scripts/lib/item.lua</code>
- <strong>Lua Examples</strong>: <code>RemixedDungeon/src/main/assets/scripts/items/</code>
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Core Implementation&quot;,&quot;hid&quot;:&quot;core_implementation&quot;,&quot;codeblockOffset&quot;:15,&quot;secid&quot;:29,&quot;range&quot;:&quot;15311-15582&quot;} -->
<h3 class="sectionedit30" id="key_methods_in_customitemjava">Key Methods in CustomItem.java</h3>
<div class="level3">

<p>
- <code>desc()</code> - Returns item properties from Lua script
- <code>execute()</code> - Handles item actions like drinking, reading, etc.
- <code>attackProc()</code> - Called when item is used in combat
- <code>defenceProc()</code> - Called when item defends against attacks
- <code>activate()/deactivate()</code> - Called when item is equipped/unequipped
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Key Methods in CustomItem.java&quot;,&quot;hid&quot;:&quot;key_methods_in_customitemjava&quot;,&quot;codeblockOffset&quot;:15,&quot;secid&quot;:30,&quot;range&quot;:&quot;15583-15938&quot;} -->
<h3 class="sectionedit31" id="key_methods_in_itemlua">Key Methods in item.lua</h3>
<div class="level3">

<p>
- <code>item.init</code> - Initializes the item with Lua functions
- <code>desc()</code> - Defines item properties (image, name, price, etc.)
- <code>execute(self, item, hero, action)</code> - Handles item actions
- <code>actions(self, item, hero)</code> - Defines available actions
- <code>attackProc(self, enemy, damage)</code> - Combat behavior
- <code>defenceProc(self, enemy, damage)</code> - Defense behavior
- <code>onThrow(self, item, cell, thrower)</code> - Throwing behavior
</p>

<p>
Creating custom items without Java is quite powerful in Remixed Dungeon. With Lua scripting, you can create complex interactions, unique mechanics, and engaging new content for players to discover!
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Key Methods in item.lua&quot;,&quot;hid&quot;:&quot;key_methods_in_itemlua&quot;,&quot;codeblockOffset&quot;:15,&quot;secid&quot;:31,&quot;range&quot;:&quot;15939-&quot;} -->