
<h1 class="sectionedit1" id="creating_custom_levels_with_json">Creating Custom Levels with JSON</h1>
<div class="level1">

<p>
Remixed Dungeon allows you to create custom levels using JSON configuration files. Custom levels are implemented via the PredesignedLevel class, which reads level data from JSON files.
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Creating Custom Levels with JSON&quot;,&quot;hid&quot;:&quot;creating_custom_levels_with_json&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:1,&quot;range&quot;:&quot;1-234&quot;} -->
<h2 class="sectionedit2" id="json-based_level_creation">JSON-Based Level Creation</h2>
<div class="level2">

<p>
For custom levels, you can define levels using JSON with integer-based tile representations.
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;JSON-Based Level Creation&quot;,&quot;hid&quot;:&quot;json-based_level_creation&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:2,&quot;range&quot;:&quot;235-367&quot;} -->
<h3 class="sectionedit3" id="basic_level_structure">Basic Level Structure</h3>
<div class="level3">

<p>
Create <code>levelsDesc/custom_level.json</code>:
</p>

<p>
<pre class="code json">{
  &quot;width&quot;: 16,
  &quot;height&quot;: 16,
  &quot;map&quot;: [
    36, 36, 36, 36, 36, 36, 36, 36, 36, 36, 36, 36, 36, 36, 36, 36,
    36,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1, 36,
    36,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1, 36,
    36,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1, 36,
    36,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1, 36,
    36,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1, 36,
    36,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1, 36,
    36,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1, 36,
    36,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1, 36,
    36,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1, 36,
    36,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1, 36,
    36,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1, 36,
    36,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1, 36,
    36,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1, 36,
    36,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1, 36,
    36, 36, 36, 36, 36, 36, 36, 36, 36, 36, 36, 36, 36, 36, 36, 36
  ],
  &quot;entrance&quot;: [7, 14],  // Entrance coordinates [x, y]
  &quot;exit&quot;: [7, 1],       // Exit coordinates [x, y]
  &quot;mobs&quot;: [
    {
      &quot;kind&quot;: &quot;Rat&quot;,
      &quot;x&quot;: 5,
      &quot;y&quot;: 8
    },
    {
      &quot;kind&quot;: &quot;Gnoll&quot;,
      &quot;x&quot;: 10,
      &quot;y&quot;: 5
    }
  ],
  &quot;items&quot;: [
    {
      &quot;kind&quot;: &quot;HealthPotion&quot;,
      &quot;x&quot;: 8,
      &quot;y&quot;: 8
    },
    {
      &quot;kind&quot;: &quot;ScrollOfIdentify&quot;,
      &quot;x&quot;: 7,
      &quot;y&quot;: 5
    }
  ],
  &quot;customTiles&quot;: true,
  &quot;tiles&quot;: &quot;tiles0.png&quot;,
  &quot;water&quot;: &quot;water0.png&quot;
}</pre>

</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Basic Level Structure&quot;,&quot;hid&quot;:&quot;basic_level_structure&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:3,&quot;range&quot;:&quot;368-2080&quot;} -->
<h3 class="sectionedit4" id="map_array_legend">Map Array Legend</h3>
<div class="level3">

<p>
The map array uses integers to represent different terrain types:
</p>
<ul>
<li class="level1"><div class="li"> 36 - Wall (Patched stone wall in default tileset)</div>
</li>
<li class="level1"><div class="li"> 1 - Empty floor (Normal floor in default tileset)</div>
</li>
<li class="level1"><div class="li"> 4 - Door (Closed door in default tileset)</div>
</li>
<li class="level1"><div class="li"> 7 - Entrance/Exit (Transition in default tileset)</div>
</li>
<li class="level1"><div class="li"> Other values correspond to specific terrain types in the tileset</div>
</li>
</ul>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Map Array Legend&quot;,&quot;hid&quot;:&quot;map_array_legend&quot;,&quot;codeblockOffset&quot;:1,&quot;secid&quot;:4,&quot;range&quot;:&quot;2081-2451&quot;} -->
<h3 class="sectionedit5" id="advanced_level_features">Advanced Level Features</h3>
<div class="level3">

<p>
You can include complex features in your JSON levels:
</p>

<p>
<pre class="code json">{
  &quot;width&quot;: 32,
  &quot;height&quot;: 32,
  &quot;map&quot;: [
    // Integer array representing the level layout
  ],
&nbsp;
  &quot;entrance&quot;: [15, 31],  // Entrance coordinates [x, y]
  &quot;exit&quot;: [15, 0],       // Exit coordinates [x, y]
&nbsp;
  // For levels with multiple exits
  &quot;multiexit&quot;: [
    [10, 0],
    [20, 0]
  ],
&nbsp;
  // Custom tile layers for visual effects
  &quot;customTiles&quot;: true,
  &quot;baseTileVar&quot;: [ /* Integer array for base tile variations */ ],
  &quot;decoTileVar&quot;: [ /* Integer array for decoration tile variations */ ],
  &quot;deco2TileVar&quot;: [ /* Integer array for secondary decoration tile variations */ ],
  &quot;roofBaseTileVar&quot;: [ /* Integer array for roof base tile variations */ ],
  &quot;roofDecoTileVar&quot;: [ /* Integer array for roof decoration tile variations */ ],
&nbsp;
  // Tileset and water texture files
  &quot;tiles&quot;: &quot;tiles0.png&quot;,
  &quot;water&quot;: &quot;water0.png&quot;,
  &quot;tiles_base&quot;: &quot;tiles0.png&quot;,
  &quot;tiles_deco&quot;: &quot;tiles0.png&quot;,
  &quot;tiles_deco2&quot;: &quot;tiles0.png&quot;,
  &quot;tiles_logic&quot;: &quot;tiles0.png&quot;,
  &quot;tiles_mobs&quot;: &quot;Mobs.png&quot;,
  &quot;tiles_roof_base&quot;: &quot;tiles0.png&quot;,
  &quot;tiles_roof_deco&quot;: &quot;tiles0.png&quot;,
  &quot;tiles_objects&quot;: &quot;Objects.png&quot;,
&nbsp;
  // Tile descriptions for tooltips
  &quot;decoName&quot;: [ /* Array of tile names for tooltips */ ],
  &quot;decoDesc&quot;: [ /* Array of tile descriptions for tooltips */ ],
&nbsp;
  &quot;mobs&quot;: [
    {
      &quot;kind&quot;: &quot;Rat&quot;,  // Use the internal mob class name
      &quot;x&quot;: 10,
      &quot;y&quot;: 10
    }
  ],
  &quot;items&quot;: [
    {
      &quot;kind&quot;: &quot;HealthPotion&quot;,  // Use the internal item class name
      &quot;x&quot;: 15,
      &quot;y&quot;: 15
    }
  ],
&nbsp;
  // Complex objects in the level
  &quot;objects&quot;: [
    {
      &quot;class&quot;: &quot;com.nyrds.pixeldungeon.levels.objects.SignObject&quot;,
      &quot;x&quot;: 5,
      &quot;y&quot;: 5,
      &quot;text&quot;: &quot;Welcome to the dungeon!&quot;
    }
  ],
&nbsp;
  // Level-specific properties
  &quot;lighted&quot;: true,        // Whether the level is fully lit
  &quot;boss_level&quot;: false,    // Whether this is a boss level
  &quot;maxBrightness&quot;: 1.05,  // Maximum brightness level
&nbsp;
  // Level-specific music (defined in Dungeon.json)
  // Music is set in the Dungeon.json level definition, not in the level JSON
&nbsp;
  // Lua script for level behavior
  &quot;script&quot;: &quot;scripts/my_level_script.lua&quot;
}</pre>

</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Advanced Level Features&quot;,&quot;hid&quot;:&quot;advanced_level_features&quot;,&quot;codeblockOffset&quot;:1,&quot;secid&quot;:5,&quot;range&quot;:&quot;2452-4664&quot;} -->
<h3 class="sectionedit6" id="level_scripts">Level Scripts</h3>
<div class="level3">

<p>
You can add script functionality to your custom levels by defining a script in Dungeon.json:
</p>

<p>
<pre class="code json">{
  &quot;Levels&quot;:{
    // Other levels...
    &quot;custom_1&quot;:{&quot;kind&quot;:&quot;PredesignedLevel&quot;, &quot;depth&quot;:6, &quot;file&quot;:&quot;levelsDesc/custom_level.json&quot;, &quot;script&quot;: &quot;scripts/my_custom_level_script&quot;, &quot;music&quot;:&quot;ost_prison&quot;}
  }
}</pre>

</p>

<p>
Create <code>scripts/my_custom_level_script.lua</code>. This script will be executed when the level loads:
</p>

<p>
<pre class="code lua"><span class="kw1">local</span> RPD <span class="sy0">=</span> <span class="kw3">require</span> <span class="st0">&quot;scripts/lib/commonClasses&quot;</span>
&nbsp;
<span class="co1">-- The script defines a ScriptedActor which can respond to various game events</span>
<span class="kw1">local</span> M <span class="sy0">=</span> <span class="br0">&#123;</span><span class="br0">&#125;</span>
&nbsp;
<span class="co1">-- Called when the actor is added to the level</span>
<span class="kw1">function</span> M<span class="sy0">.</span>onSpawn<span class="br0">&#40;</span>self<span class="br0">&#41;</span>
    RPD<span class="sy0">.</span>glog<span class="br0">&#40;</span><span class="st0">&quot;Welcome to my custom level!&quot;</span><span class="br0">&#41;</span>
<span class="kw1">end</span>
&nbsp;
<span class="co1">-- Called each turn (very frequently)</span>
<span class="kw1">function</span> M<span class="sy0">.</span>onTurn<span class="br0">&#40;</span>self<span class="br0">&#41;</span>
    <span class="co1">-- Example: spawn a random mob every 50 turns</span>
    <span class="kw1">if</span> RPD<span class="sy0">.</span>GameAction <span class="kw2">and</span> RPD<span class="sy0">.</span>GameLoop<span class="sy0">.</span>currentTurn <span class="sy0">%</span> <span class="nu0">50</span> <span class="sy0">==</span> <span class="nu0">0</span> <span class="kw2">and</span> <span class="kw3">math.random</span><span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="sy0">&lt;</span> <span class="nu0">0.3</span> <span class="kw1">then</span>
        <span class="kw1">local</span> level <span class="sy0">=</span> RPD<span class="sy0">.</span>Dungeon<span class="sy0">.</span>level<span class="br0">&#40;</span><span class="br0">&#41;</span>
        <span class="kw1">local</span> width <span class="sy0">=</span> level<span class="sy0">:</span>getWidth<span class="br0">&#40;</span><span class="br0">&#41;</span>
        <span class="kw1">local</span> height <span class="sy0">=</span> level<span class="sy0">:</span>getHeight<span class="br0">&#40;</span><span class="br0">&#41;</span>
&nbsp;
        <span class="co1">-- Find a random empty cell</span>
        <span class="kw1">local</span> pos <span class="sy0">=</span> <span class="kw4">nil</span>
        <span class="kw1">for</span> i <span class="sy0">=</span> <span class="nu0">1</span><span class="sy0">,</span> <span class="nu0">100</span> <span class="kw1">do</span>
            <span class="kw1">local</span> testX <span class="sy0">=</span> <span class="kw3">math.random</span><span class="br0">&#40;</span><span class="nu0">1</span><span class="sy0">,</span> width <span class="sy0">-</span> <span class="nu0">2</span><span class="br0">&#41;</span>
            <span class="kw1">local</span> testY <span class="sy0">=</span> <span class="kw3">math.random</span><span class="br0">&#40;</span><span class="nu0">1</span><span class="sy0">,</span> height <span class="sy0">-</span> <span class="nu0">2</span><span class="br0">&#41;</span>
            <span class="kw1">local</span> testCell <span class="sy0">=</span> level<span class="sy0">:</span>cell<span class="br0">&#40;</span>testX<span class="sy0">,</span> testY<span class="br0">&#41;</span>
            <span class="kw1">if</span> level<span class="sy0">:</span>freeCell<span class="br0">&#40;</span>testCell<span class="br0">&#41;</span> <span class="kw2">and</span> level<span class="sy0">:</span>passable<span class="sy0">:</span>cell<span class="br0">&#40;</span>testCell<span class="br0">&#41;</span> <span class="kw1">then</span>
                pos <span class="sy0">=</span> testCell
                <span class="kw1">break</span>
            <span class="kw1">end</span>
        <span class="kw1">end</span>
&nbsp;
        <span class="kw1">if</span> pos <span class="kw1">then</span>
            RPD<span class="sy0">.</span>spawnMob<span class="br0">&#40;</span><span class="st0">&quot;Rat&quot;</span><span class="sy0">,</span> pos<span class="br0">&#41;</span>
            RPD<span class="sy0">.</span>glog<span class="br0">&#40;</span><span class="st0">&quot;A rat appears from the shadows!&quot;</span><span class="br0">&#41;</span>
        <span class="kw1">end</span>
    <span class="kw1">end</span>
<span class="kw1">end</span>
&nbsp;
<span class="co1">-- Called when the player steps on a cell (x, y)</span>
<span class="kw1">function</span> M<span class="sy0">.</span>onCellSelected<span class="br0">&#40;</span>self<span class="sy0">,</span> x<span class="sy0">,</span> y<span class="sy0">,</span> user<span class="br0">&#41;</span>
    <span class="co1">-- Example: add an effect when player steps on certain tiles</span>
    <span class="kw1">local</span> level <span class="sy0">=</span> RPD<span class="sy0">.</span>Dungeon<span class="sy0">.</span>level<span class="br0">&#40;</span><span class="br0">&#41;</span>
    <span class="kw1">local</span> cell <span class="sy0">=</span> level<span class="sy0">:</span>cell<span class="br0">&#40;</span>x<span class="sy0">,</span> y<span class="br0">&#41;</span>
    RPD<span class="sy0">.</span>topEffect<span class="br0">&#40;</span>cell<span class="sy0">,</span> <span class="st0">&quot;poison&quot;</span><span class="br0">&#41;</span>
<span class="kw1">end</span>
&nbsp;
<span class="co1">-- Other possible functions:</span>
<span class="co1">-- onAttack(self, attacker, target)</span>
<span class="co1">-- onCast(self, attacker, target)</span>
<span class="co1">-- onDie(self, cause)</span>
<span class="co1">-- onPickup(self, item, holder)</span>
<span class="co1">-- onUseItem(self, item, holder)</span>
&nbsp;
<span class="kw1">return</span> M</pre>

</p>

<p>
Note that scripts can also be associated with individual objects/traps in the level definition:
</p>

<p>
<pre class="code json">{
  &quot;objects&quot;: [
    {
      &quot;kind&quot;: &quot;Trap&quot;,
      &quot;x&quot;: 10,
      &quot;y&quot;: 10,
      &quot;trapKind&quot;: &quot;scriptFile&quot;,
      &quot;script&quot;: &quot;scripts/traps/MyCustomTrap&quot;,
      &quot;uses&quot;: 5
    }
  ]
}</pre>

</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Level Scripts&quot;,&quot;hid&quot;:&quot;level_scripts&quot;,&quot;codeblockOffset&quot;:2,&quot;secid&quot;:6,&quot;range&quot;:&quot;4665-7022&quot;} -->
<h2 class="sectionedit7" id="tiled_map_editor_approach">Tiled Map Editor Approach</h2>
<div class="level2">

<p>
For complex visual level design, you can use the Tiled map editor to design your levels visually before converting them to the PredesignedLevel format.
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Tiled Map Editor Approach&quot;,&quot;hid&quot;:&quot;tiled_map_editor_approach&quot;,&quot;codeblockOffset&quot;:5,&quot;secid&quot;:7,&quot;range&quot;:&quot;7023-7214&quot;} -->
<h3 class="sectionedit8" id="setting_up_tiled">Setting Up Tiled</h3>
<div class="level3">
<ul>
<li class="level1"><div class="li"> Download Tiled from <a href="https://www.mapeditor.org/" class="urlextern" title="https://www.mapeditor.org/">https://www.mapeditor.org/</a></div>
</li>
<li class="level1"><div class="li"> Create a new map with the same dimensions as you plan to use in-game (typically 32&times;32 for most levels)</div>
</li>
<li class="level1"><div class="li"> Use tilesets that match the game&#039;s art style, or create your own</div>
</li>
</ul>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Setting Up Tiled&quot;,&quot;hid&quot;:&quot;setting_up_tiled&quot;,&quot;codeblockOffset&quot;:5,&quot;secid&quot;:8,&quot;range&quot;:&quot;7215-7469&quot;} -->
<h3 class="sectionedit9" id="tileset_creation">Tileset Creation</h3>
<div class="level3">
<ul>
<li class="level1"><div class="li"> Create a tileset image (PNG) with all your terrain tiles</div>
</li>
<li class="level1"><div class="li"> Each tile should be 16&times;16 pixels (same as the base game)</div>
</li>
<li class="level1"><div class="li"> Organize tiles in rows: walls, floors, special features, etc.</div>
</li>
</ul>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Tileset Creation&quot;,&quot;hid&quot;:&quot;tileset_creation&quot;,&quot;codeblockOffset&quot;:5,&quot;secid&quot;:9,&quot;range&quot;:&quot;7470-7685&quot;} -->
<h3 class="sectionedit10" id="object_layers_in_tiled">Object Layers in Tiled</h3>
<div class="level3">

<p>
Use special object layers in Tiled to plan game elements:
</p>
<ul>
<li class="level1"><div class="li"> <code>mobs</code> layer - Place mob spawn points using point objects</div>
</li>
<li class="level1"><div class="li"> <code>items</code> layer - Place items using point objects</div>
</li>
<li class="level1"><div class="li"> <code>features</code> layer - Place special features like altars, fountains</div>
</li>
<li class="level1"><div class="li"> <code>exits</code> layer - Mark exits and entrances</div>
</li>
</ul>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Object Layers in Tiled&quot;,&quot;hid&quot;:&quot;object_layers_in_tiled&quot;,&quot;codeblockOffset&quot;:5,&quot;secid&quot;:10,&quot;range&quot;:&quot;7686-8014&quot;} -->
<h3 class="sectionedit11" id="converting_from_tiled_to_predesignedlevel">Converting from Tiled to PredesignedLevel</h3>
<div class="level3">

<p>
Tiled maps need to be converted to the integer array format used by PredesignedLevel:
</p>
<ul>
<li class="level1"><div class="li"> After designing your level in Tiled, you&#039;ll need to manually convert the tile IDs to match Remixed Dungeon&#039;s terrain system</div>
</li>
<li class="level1"><div class="li"> Each Tiled layer (base, deco, etc.) corresponds to arrays in the JSON: <code>map</code>, <code>baseTileVar</code>, <code>decoTileVar</code>, etc.</div>
</li>
<li class="level1"><div class="li"> Mob and item positions from Tiled object layers need to be converted to the <code>mobs</code> and <code>items</code> arrays in JSON format</div>
</li>
<li class="level1"><div class="li"> The CSV data from Tiled layers needs to be adjusted to match the expected tile indices</div>
</li>
</ul>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Converting from Tiled to PredesignedLevel&quot;,&quot;hid&quot;:&quot;converting_from_tiled_to_predesignedlevel&quot;,&quot;codeblockOffset&quot;:5,&quot;secid&quot;:11,&quot;range&quot;:&quot;8015-8621&quot;} -->
<h2 class="sectionedit12" id="complex_level_examples">Complex Level Examples</h2>
<div class="level2">

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Complex Level Examples&quot;,&quot;hid&quot;:&quot;complex_level_examples&quot;,&quot;codeblockOffset&quot;:5,&quot;secid&quot;:12,&quot;range&quot;:&quot;8622-8657&quot;} -->
<h3 class="sectionedit13" id="switch_and_door_puzzle_level">Switch and Door Puzzle Level</h3>
<div class="level3">

<p>
Create a level with switches that open doors:
</p>

<p>
<pre class="code json">{
  &quot;width&quot;: 16,
  &quot;height&quot;: 16,
  &quot;map&quot;: [
     4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4,
     4, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 4,
     4, 1, 4, 1, 4, 1, 4, 1, 1, 4, 1, 4, 1, 4, 1, 4,
     4, 1, 4, 1, 4, 1, 4, 1, 1, 4, 1, 4, 1, 4, 1, 4,
     4, 1, 4, 1, 4, 1, 4, 1, 1, 4, 1, 4, 1, 4, 1, 4,
     4, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 4,
     4, 1, 4, 1, 4, 1, 1, 1, 1, 1, 1, 1, 1, 4, 1, 4,
     4, 1, 4, 1, 4, 1, 1, 1, 1, 1, 1, 1, 1, 4, 1, 4,
     4, 1, 4, 1, 4, 1, 1, 1, 1, 1, 1, 1, 1, 4, 1, 4,
     4, 1, 4, 1, 4, 1, 1, 1, 1, 1, 1, 1, 1, 4, 1, 4,
     4, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 4,
     4, 1, 4, 1, 4, 1, 4, 1, 1, 4, 1, 4, 1, 4, 1, 4,
     4, 1, 4, 1, 4, 1, 4, 1, 1, 4, 1, 4, 1, 4, 1, 4,
     4, 1, 4, 1, 4, 1, 4, 1, 1, 4, 1, 4, 1, 4, 1, 4,
     4, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 4,
     4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4
  ],
  &quot;entrance&quot;: [1, 1],
  &quot;exit&quot;: [1, 14],
  &quot;mobs&quot;: [
    {
      &quot;kind&quot;: &quot;Rat&quot;,
      &quot;x&quot;: 7,
      &quot;y&quot;: 7
    }
  ]
}</pre>

</p>

<p>
Create <code>scripts/puzzle_level.lua</code> and reference it in Dungeon.json:
</p>

<p>
<pre class="code json">{
  &quot;Levels&quot;:{
    &quot;puzzle_1&quot;:{&quot;kind&quot;:&quot;PredesignedLevel&quot;, &quot;depth&quot;:6, &quot;file&quot;:&quot;levelsDesc/puzzle_level.json&quot;, &quot;script&quot;: &quot;scripts/puzzle_level&quot;}
  }
}</pre>

</p>

<p>
<pre class="code lua"><span class="kw1">local</span> RPD <span class="sy0">=</span> <span class="kw3">require</span> <span class="st0">&quot;scripts/lib/commonClasses&quot;</span>
&nbsp;
<span class="kw1">local</span> M <span class="sy0">=</span> <span class="br0">&#123;</span><span class="br0">&#125;</span>
&nbsp;
<span class="co1">-- Called when the actor is added to the level</span>
<span class="kw1">function</span> M<span class="sy0">.</span>onSpawn<span class="br0">&#40;</span>self<span class="br0">&#41;</span>
    RPD<span class="sy0">.</span>glog<span class="br0">&#40;</span><span class="st0">&quot;Welcome to the puzzle level!&quot;</span><span class="br0">&#41;</span>
<span class="kw1">end</span>
&nbsp;
<span class="co1">-- Called each turn - check if player stepped on switch</span>
<span class="kw1">function</span> M<span class="sy0">.</span>onTurn<span class="br0">&#40;</span>self<span class="br0">&#41;</span>
    <span class="kw1">local</span> hero <span class="sy0">=</span> RPD<span class="sy0">.</span>Dungeon<span class="sy0">.</span>hero
    <span class="kw1">local</span> heroPos <span class="sy0">=</span> hero<span class="sy0">:</span>getPos<span class="br0">&#40;</span><span class="br0">&#41;</span>
    <span class="kw1">local</span> level <span class="sy0">=</span> RPD<span class="sy0">.</span>Dungeon<span class="sy0">.</span>level<span class="br0">&#40;</span><span class="br0">&#41;</span>
    <span class="kw1">local</span> x<span class="sy0">,</span> y <span class="sy0">=</span> level<span class="sy0">:</span>cellToCoord<span class="br0">&#40;</span>heroPos<span class="br0">&#41;</span>
&nbsp;
    <span class="co1">-- Check if player stepped on switch positions (represented as specific floor tiles)</span>
    <span class="kw1">if</span> level<span class="sy0">:</span>map<span class="br0">&#40;</span>heroPos<span class="br0">&#41;</span> <span class="sy0">==</span> <span class="nu0">8</span> <span class="kw2">and</span> x <span class="sy0">==</span> <span class="nu0">3</span> <span class="kw2">and</span> y <span class="sy0">==</span> <span class="nu0">2</span> <span class="kw1">then</span>  <span class="co1">-- Specific switch tile at 3,2</span>
        <span class="co1">-- Change door at 3,7 from door (4) to floor (1)</span>
        level<span class="sy0">:</span>set<span class="br0">&#40;</span>level<span class="sy0">:</span>cell<span class="br0">&#40;</span><span class="nu0">3</span><span class="sy0">,</span> <span class="nu0">7</span><span class="br0">&#41;</span><span class="sy0">,</span> <span class="nu0">1</span><span class="br0">&#41;</span>
        RPD<span class="sy0">.</span>glog<span class="br0">&#40;</span><span class="st0">&quot;First door opened!&quot;</span><span class="br0">&#41;</span>
        RPD<span class="sy0">.</span>topEffect<span class="br0">&#40;</span>level<span class="sy0">:</span>cell<span class="br0">&#40;</span><span class="nu0">3</span><span class="sy0">,</span> <span class="nu0">7</span><span class="br0">&#41;</span><span class="sy0">,</span> <span class="st0">&quot;poison&quot;</span><span class="br0">&#41;</span>
    <span class="kw1">elseif</span> level<span class="sy0">:</span>map<span class="br0">&#40;</span>heroPos<span class="br0">&#41;</span> <span class="sy0">==</span> <span class="nu0">8</span> <span class="kw2">and</span> x <span class="sy0">==</span> <span class="nu0">5</span> <span class="kw2">and</span> y <span class="sy0">==</span> <span class="nu0">2</span> <span class="kw1">then</span>  <span class="co1">-- Switch at 5,2</span>
        level<span class="sy0">:</span>set<span class="br0">&#40;</span>level<span class="sy0">:</span>cell<span class="br0">&#40;</span><span class="nu0">5</span><span class="sy0">,</span> <span class="nu0">7</span><span class="br0">&#41;</span><span class="sy0">,</span> <span class="nu0">1</span><span class="br0">&#41;</span>  <span class="co1">-- Open corresponding door</span>
        RPD<span class="sy0">.</span>glog<span class="br0">&#40;</span><span class="st0">&quot;Second door opened!&quot;</span><span class="br0">&#41;</span>
        RPD<span class="sy0">.</span>topEffect<span class="br0">&#40;</span>level<span class="sy0">:</span>cell<span class="br0">&#40;</span><span class="nu0">5</span><span class="sy0">,</span> <span class="nu0">7</span><span class="br0">&#41;</span><span class="sy0">,</span> <span class="st0">&quot;poison&quot;</span><span class="br0">&#41;</span>
    <span class="kw1">elseif</span> level<span class="sy0">:</span>map<span class="br0">&#40;</span>heroPos<span class="br0">&#41;</span> <span class="sy0">==</span> <span class="nu0">8</span> <span class="kw2">and</span> x <span class="sy0">==</span> <span class="nu0">7</span> <span class="kw2">and</span> y <span class="sy0">==</span> <span class="nu0">2</span> <span class="kw1">then</span>  <span class="co1">-- Switch at 7,2</span>
        level<span class="sy0">:</span>set<span class="br0">&#40;</span>level<span class="sy0">:</span>cell<span class="br0">&#40;</span><span class="nu0">7</span><span class="sy0">,</span> <span class="nu0">7</span><span class="br0">&#41;</span><span class="sy0">,</span> <span class="nu0">1</span><span class="br0">&#41;</span>  <span class="co1">-- Open corresponding door</span>
        RPD<span class="sy0">.</span>glog<span class="br0">&#40;</span><span class="st0">&quot;Center door opened!&quot;</span><span class="br0">&#41;</span>
        RPD<span class="sy0">.</span>topEffect<span class="br0">&#40;</span>level<span class="sy0">:</span>cell<span class="br0">&#40;</span><span class="nu0">7</span><span class="sy0">,</span> <span class="nu0">7</span><span class="br0">&#41;</span><span class="sy0">,</span> <span class="st0">&quot;poison&quot;</span><span class="br0">&#41;</span>
    <span class="kw1">end</span>
<span class="kw1">end</span>
&nbsp;
<span class="kw1">return</span> M</pre>

</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Switch and Door Puzzle Level&quot;,&quot;hid&quot;:&quot;switch_and_door_puzzle_level&quot;,&quot;codeblockOffset&quot;:5,&quot;secid&quot;:13,&quot;range&quot;:&quot;8658-11315&quot;} -->
<h3 class="sectionedit14" id="procedural_arena_level">Procedural Arena Level</h3>
<div class="level3">

<p>
Create a level that generates content dynamically:
</p>

<p>
<pre class="code json">{
  &quot;width&quot;: 24,
  &quot;height&quot;: 24,
  &quot;map&quot;: [
     4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4,
     4, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 4,
     4, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 4,
     4, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 4,
     4, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 4,
     4, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 4,
     4, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 4,
     4, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 4,
     4, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 4,
     4, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 4,
     4, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 4,
     4, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 4,
     4, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 4,
     4, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 4,
     4, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 4,
     4, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 4,
     4, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 4,
     4, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 4,
     4, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 4,
     4, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 4,
     4, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 4,
     4, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 4,
     4, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 4,
     4, 4, 4, 4, 4, 4, 4, 7, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4
  ],
  &quot;entrance&quot;: [11, 23],
  &quot;multiexit&quot;: [],
  &quot;mobs&quot;: [
    {
      &quot;kind&quot;: &quot;Rat&quot;,
      &quot;x&quot;: 5,
      &quot;y&quot;: 5
    }
  ]
}</pre>

</p>

<p>
Create <code>scripts/arena_level.lua</code> and reference it in Dungeon.json:
</p>

<p>
<pre class="code json">{
  &quot;Levels&quot;:{
    &quot;arena_1&quot;:{&quot;kind&quot;:&quot;PredesignedLevel&quot;, &quot;depth&quot;:7, &quot;file&quot;:&quot;levelsDesc/arena_level.json&quot;, &quot;script&quot;: &quot;scripts/arena_level&quot;}
  }
}</pre>

</p>

<p>
<pre class="code lua"><span class="kw1">local</span> RPD <span class="sy0">=</span> <span class="kw3">require</span> <span class="st0">&quot;scripts/lib/commonClasses&quot;</span>
&nbsp;
<span class="kw1">local</span> M <span class="sy0">=</span> <span class="br0">&#123;</span><span class="br0">&#125;</span>
<span class="kw1">local</span> wave <span class="sy0">=</span> <span class="nu0">0</span>
&nbsp;
<span class="co1">-- Called when the actor is added to the level</span>
<span class="kw1">function</span> M<span class="sy0">.</span>onSpawn<span class="br0">&#40;</span>self<span class="br0">&#41;</span>
    wave <span class="sy0">=</span> <span class="nu0">1</span>
    RPD<span class="sy0">.</span>glog<span class="br0">&#40;</span><span class="st0">&quot;The arena gates close behind you! Wave &quot;</span> <span class="sy0">..</span> wave <span class="sy0">..</span> <span class="st0">&quot; approaches...&quot;</span><span class="br0">&#41;</span>
    M<span class="sy0">.</span>spawnWave<span class="br0">&#40;</span><span class="br0">&#41;</span>
<span class="kw1">end</span>
&nbsp;
<span class="co1">-- Called each turn</span>
<span class="kw1">function</span> M<span class="sy0">.</span>onTurn<span class="br0">&#40;</span>self<span class="br0">&#41;</span>
    <span class="kw1">local</span> level <span class="sy0">=</span> RPD<span class="sy0">.</span>Dungeon<span class="sy0">.</span>level<span class="br0">&#40;</span><span class="br0">&#41;</span>
    <span class="kw1">local</span> allMobs <span class="sy0">=</span> level<span class="sy0">:</span>mobs<span class="br0">&#40;</span><span class="br0">&#41;</span>
&nbsp;
    <span class="co1">-- Count alive mobs excluding the player</span>
    <span class="kw1">local</span> alive <span class="sy0">=</span> <span class="nu0">0</span>
    <span class="kw1">for</span> i <span class="sy0">=</span> <span class="nu0">0</span><span class="sy0">,</span> allMobs<span class="sy0">:</span>size<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">-</span><span class="nu0">1</span> <span class="kw1">do</span>
        <span class="kw1">local</span> mob <span class="sy0">=</span> allMobs<span class="sy0">:</span>get<span class="br0">&#40;</span>i<span class="br0">&#41;</span>
        <span class="kw1">if</span> mob<span class="sy0">:</span>isAlive<span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="kw2">and</span> mob <span class="sy0">~=</span> RPD<span class="sy0">.</span>Dungeon<span class="sy0">.</span>hero <span class="kw1">then</span>
            alive <span class="sy0">=</span> alive <span class="sy0">+</span> <span class="nu0">1</span>
        <span class="kw1">end</span>
    <span class="kw1">end</span>
&nbsp;
    <span class="kw1">if</span> alive <span class="sy0">==</span> <span class="nu0">0</span> <span class="kw1">then</span>
        wave <span class="sy0">=</span> wave <span class="sy0">+</span> <span class="nu0">1</span>
        <span class="kw1">if</span> wave <span class="sy0">&lt;=</span> <span class="nu0">5</span> <span class="kw1">then</span>
            RPD<span class="sy0">.</span>glog<span class="br0">&#40;</span><span class="st0">&quot;Wave &quot;</span> <span class="sy0">..</span> wave <span class="sy0">..</span> <span class="st0">&quot; begins!&quot;</span><span class="br0">&#41;</span>
            M<span class="sy0">.</span>spawnWave<span class="br0">&#40;</span><span class="br0">&#41;</span>
        <span class="kw1">else</span>
            RPD<span class="sy0">.</span>glog<span class="br0">&#40;</span><span class="st0">&quot;You have survived the arena!&quot;</span><span class="br0">&#41;</span>
            <span class="co1">-- Change exit tile to be accessible (if needed)</span>
        <span class="kw1">end</span>
    <span class="kw1">end</span>
<span class="kw1">end</span>
&nbsp;
<span class="kw1">function</span> M<span class="sy0">.</span>spawnWave<span class="br0">&#40;</span><span class="br0">&#41;</span>
    <span class="kw1">local</span> enemyClasses <span class="sy0">=</span> <span class="br0">&#123;</span><span class="st0">&quot;Rat&quot;</span><span class="sy0">,</span> <span class="st0">&quot;Gnoll&quot;</span><span class="sy0">,</span> <span class="st0">&quot;Crab&quot;</span><span class="br0">&#125;</span>
    <span class="kw1">local</span> class <span class="sy0">=</span> enemyClasses<span class="br0">&#91;</span>wave <span class="sy0">%</span> <span class="sy0">#</span>enemyClasses <span class="sy0">+</span> <span class="nu0">1</span><span class="br0">&#93;</span>
&nbsp;
    <span class="kw1">local</span> level <span class="sy0">=</span> RPD<span class="sy0">.</span>Dungeon<span class="sy0">.</span>level<span class="br0">&#40;</span><span class="br0">&#41;</span>
    <span class="kw1">local</span> width <span class="sy0">=</span> level<span class="sy0">:</span>getWidth<span class="br0">&#40;</span><span class="br0">&#41;</span>
    <span class="kw1">local</span> height <span class="sy0">=</span> level<span class="sy0">:</span>getHeight<span class="br0">&#40;</span><span class="br0">&#41;</span>
&nbsp;
    <span class="co1">-- Spawn multiple enemies based on wave</span>
    <span class="kw1">for</span> i <span class="sy0">=</span> <span class="nu0">1</span><span class="sy0">,</span> wave <span class="sy0">*</span> <span class="nu0">2</span> <span class="kw1">do</span>
        <span class="kw1">local</span> pos <span class="sy0">=</span> <span class="kw4">nil</span>
        <span class="kw1">for</span> j <span class="sy0">=</span> <span class="nu0">1</span><span class="sy0">,</span> <span class="nu0">100</span> <span class="kw1">do</span>  <span class="co1">-- Try up to 100 times to find an empty cell</span>
            <span class="kw1">local</span> testX <span class="sy0">=</span> <span class="kw3">math.random</span><span class="br0">&#40;</span><span class="nu0">1</span><span class="sy0">,</span> width <span class="sy0">-</span> <span class="nu0">2</span><span class="br0">&#41;</span>
            <span class="kw1">local</span> testY <span class="sy0">=</span> <span class="kw3">math.random</span><span class="br0">&#40;</span><span class="nu0">1</span><span class="sy0">,</span> height <span class="sy0">-</span> <span class="nu0">2</span><span class="br0">&#41;</span>
            <span class="kw1">local</span> testCell <span class="sy0">=</span> level<span class="sy0">:</span>cell<span class="br0">&#40;</span>testX<span class="sy0">,</span> testY<span class="br0">&#41;</span>
            <span class="kw1">if</span> level<span class="sy0">:</span>freeCell<span class="br0">&#40;</span>testCell<span class="br0">&#41;</span> <span class="kw2">and</span> level<span class="sy0">:</span>passable<span class="sy0">:</span>cell<span class="br0">&#40;</span>testCell<span class="br0">&#41;</span> <span class="kw1">then</span>
                pos <span class="sy0">=</span> testCell
                <span class="kw1">break</span>
            <span class="kw1">end</span>
        <span class="kw1">end</span>
&nbsp;
        <span class="kw1">if</span> pos <span class="kw1">then</span>
            RPD<span class="sy0">.</span>spawnMob<span class="br0">&#40;</span>class<span class="sy0">,</span> pos<span class="br0">&#41;</span>
        <span class="kw1">end</span>
    <span class="kw1">end</span>
&nbsp;
    RPD<span class="sy0">.</span>glog<span class="br0">&#40;</span><span class="st0">&quot;Enemies pour into the arena!&quot;</span><span class="br0">&#41;</span>
<span class="kw1">end</span>
&nbsp;
<span class="kw1">return</span> M</pre>

</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Procedural Arena Level&quot;,&quot;hid&quot;:&quot;procedural_arena_level&quot;,&quot;codeblockOffset&quot;:8,&quot;secid&quot;:14,&quot;range&quot;:&quot;11316-15493&quot;} -->
<h2 class="sectionedit15" id="including_custom_levels_in_the_dungeon">Including Custom Levels in the Dungeon</h2>
<div class="level2">

<p>
To make your custom levels appear in the dungeon progression, modify <code>levelsDesc/Dungeon.json</code>. Each level is defined with a kind property and a unique ID:
</p>

<p>
<pre class="code json">{
   &quot;Levels&quot;:{
      &quot;0&quot;:{&quot;kind&quot;:&quot;SewerLevel&quot;, &quot;depth&quot;:0, &quot;size&quot;:[0,0]},
&nbsp;
      &quot;town_2&quot;:{&quot;kind&quot;:&quot;PredesignedLevel&quot;, &quot;depth&quot;:0, &quot;file&quot;:&quot;levelsDesc/Town_2021_03.json&quot;, &quot;noFogOfWar&quot;:&quot;true&quot;, &quot;isSafe&quot;:true, &quot;music&quot;:&quot;ost_town_1&quot;,&quot;script&quot;: &quot;scripts/actors/town/Compass&quot;,&quot;maxBrightness&quot;:1.05},
&nbsp;
      &quot;1&quot;:{&quot;kind&quot;:&quot;SewerLevel&quot;, &quot;depth&quot;:1,        &quot;size&quot;:[24,24], &quot;music&quot;:&quot;ost_sewer&quot;},
      &quot;2&quot;:{&quot;kind&quot;:&quot;SewerLevel&quot;, &quot;depth&quot;:2,        &quot;size&quot;:[24,24], &quot;music&quot;:&quot;ost_sewer&quot;},
      &quot;3&quot;:{&quot;kind&quot;:&quot;SewerLevel&quot;, &quot;depth&quot;:3,        &quot;size&quot;:[24,24], &quot;music&quot;:&quot;ost_sewer&quot;},
      &quot;4&quot;:{&quot;kind&quot;:&quot;SewerLevel&quot;, &quot;depth&quot;:4,        &quot;size&quot;:[24,24], &quot;music&quot;:&quot;ost_sewer&quot;},
      &quot;5&quot;:{&quot;kind&quot;:&quot;SewerBossLevel&quot;, &quot;depth&quot;:5,    &quot;size&quot;:[32,32], &quot;music&quot;:&quot;ost_boss_1_ambient&quot;, &quot;fallbackMusic&quot;:&quot;ost_boss_ambient&quot;},
&nbsp;
      // Add your custom level
      &quot;custom_1&quot;:{&quot;kind&quot;:&quot;PredesignedLevel&quot;, &quot;depth&quot;:6, &quot;file&quot;:&quot;levelsDesc/custom_level.json&quot;, &quot;music&quot;:&quot;ost_prison&quot;}
   },
&nbsp;
   &quot;Graph&quot;:{
      &quot;0&quot;:[[&quot;town_2&quot;],[]],
      &quot;town_2&quot;:[[&quot;1&quot;],[&quot;0&quot;]],
      &quot;1&quot;:[[&quot;2&quot;],[&quot;town_2&quot;]],
      &quot;2&quot;:[[&quot;3&quot;],[&quot;1&quot;]],
      &quot;3&quot;:[[&quot;4&quot;],[&quot;2&quot;]],
      &quot;4&quot;:[[&quot;5&quot;],[&quot;3&quot;]],
      &quot;5&quot;:[[&quot;custom_1&quot;],[&quot;4&quot;]],  // Connect to your custom level
      &quot;custom_1&quot;:[[&quot;6&quot;],[&quot;5&quot;]],  // Connect to next level
      &quot;6&quot;:[[&quot;7&quot;],[&quot;custom_1&quot;]],
      // ... continue the progression
   },
   &quot;Entrance&quot;:&quot;0&quot;
}</pre>

</p>

<p>
The “Graph” section defines how levels connect to each other. Each entry has the format:
</p>
<ul>
<li class="level1"><div class="li"> First array: levels that can be reached from this level</div>
</li>
<li class="level1"><div class="li"> Second array: levels that lead to this level</div>
</li>
</ul>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Including Custom Levels in the Dungeon&quot;,&quot;hid&quot;:&quot;including_custom_levels_in_the_dungeon&quot;,&quot;codeblockOffset&quot;:11,&quot;secid&quot;:15,&quot;range&quot;:&quot;15494-17248&quot;} -->
<h2 class="sectionedit16" id="testing_and_debugging">Testing and Debugging</h2>
<div class="level2">

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Testing and Debugging&quot;,&quot;hid&quot;:&quot;testing_and_debugging&quot;,&quot;codeblockOffset&quot;:12,&quot;secid&quot;:16,&quot;range&quot;:&quot;17249-17283&quot;} -->
<h3 class="sectionedit17" id="common_testing_steps">Common Testing Steps</h3>
<div class="level3">
<ul>
<li class="level1"><div class="li"> Enable your mod in-game</div>
</li>
<li class="level1"><div class="li"> Start a new game to access your custom levels</div>
</li>
<li class="level1"><div class="li"> Verify that all level elements (mobs, items, terrain) spawn correctly</div>
</li>
<li class="level1"><div class="li"> Test all scripted behaviors</div>
</li>
<li class="level1"><div class="li"> Check for pathfinding issues (ensure mobs and player can navigate properly)</div>
</li>
</ul>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Common Testing Steps&quot;,&quot;hid&quot;:&quot;common_testing_steps&quot;,&quot;codeblockOffset&quot;:12,&quot;secid&quot;:17,&quot;range&quot;:&quot;17284-17579&quot;} -->
<h3 class="sectionedit18" id="debugging_tips">Debugging Tips</h3>
<div class="level3">
<ul>
<li class="level1"><div class="li"> Use the game log to trace script execution</div>
</li>
<li class="level1"><div class="li"> Verify that coordinates in JSON are within level boundaries</div>
</li>
<li class="level1"><div class="li"> Check that all referenced files (mobs, items) exist</div>
</li>
<li class="level1"><div class="li"> Ensure terrain values match valid game terrain indices</div>
</li>
<li class="level1"><div class="li"> Use integers in map arrays that correspond to actual tileset values</div>
</li>
<li class="level1"><div class="li"> Check that level dimensions match the length of your map array</div>
</li>
</ul>

<p>
Custom levels greatly expand the possibilities for Remixed Dungeon mods. With the PredesignedLevel system, you can create unique challenges, puzzles, and experiences for players!
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Debugging Tips&quot;,&quot;hid&quot;:&quot;debugging_tips&quot;,&quot;codeblockOffset&quot;:12,&quot;secid&quot;:18,&quot;range&quot;:&quot;17580-&quot;} -->