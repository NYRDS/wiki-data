====== Ankh ======

{{ rpd:images:ankh_item.png|Ankh }}

==== Description ====
This ancient symbol of immortality grants an ability to return to life after death. Upon resurrection, all items in the hero's inventory are lost, but one random equipped item is preserved as bones that can be retrieved from the location of death.

==== Special Properties ====
  * Provides one-time resurrection after death (implemented in [[https://github.com/NYRDS/remixed-dungeon/blob/master/RemixedDungeon/src/main/java/com/watabou/pixeldungeon/items/Ankh.java#L26|Ankh.resurrect method]])
  * Upon resurrection, all items in the backpack (inventory) are lost (handled in [[https://github.com/NYRDS/remixed-dungeon/blob/master/RemixedDungeon/src/main/java/com/watabou/pixeldungeon/windows/WndResurrect.java|WndResurrect]])
  * Equipped items are NOT preserved directly - instead, one random equipped item is left as bones at the death location (implemented in [[https://github.com/NYRDS/remixed-dungeon/blob/master/RemixedDungeon/src/main/java/com/watabou/pixeldungeon/Bones.java#L22|Bones.leave method]])
  * Single use item (removed after use in [[https://github.com/NYRDS/remixed-dungeon/blob/master/RemixedDungeon/src/main/java/com/watabou/pixeldungeon/items/Ankh.java#L26|resurrect method]])
  * Stackable (though only one is useful at a time due to loss upon resurrection) (defined in [[https://github.com/NYRDS/remixed-dungeon/blob/master/RemixedDungeon/src/main/java/com/watabou/pixeldungeon/items/Ankh.java#L17|constructor]])
  * No upgrade potential (defined in [[https://github.com/NYRDS/remixed-dungeon/blob/master/RemixedDungeon/src/main/java/com/watabou/pixeldungeon/items/Ankh.java#L47|isUpgradable method]])
  * Always identified (defined in [[https://github.com/NYRDS/remixed-dungeon/blob/master/RemixedDungeon/src/main/java/com/watabou/pixeldungeon/items/Ankh.java#L51|isIdentified method]])
  * Costs 50 gold per unit (defined in [[https://github.com/NYRDS/remixed-dungeon/blob/master/RemixedDungeon/src/main/java/com/watabou/pixeldungeon/items/Ankh.java#L55|price method]])
  * Does not work if the hero is killed by a cursed item while trying to equip it (the ankh is consumed but does not prevent the death)

==== Notes ====
The Ankh is a powerful but risky item - it can save you from death, but at the cost of losing all your inventory. Only one random equipped item will be recoverable as bones from the place where you died.

==== Strategy ====
  * Best used as a last resort when facing certain death
  * Try to keep only essential items in your inventory when entering dangerous areas
  * Since only one equipped item is preserved as bones (not all equipped items), consider which item is most valuable to preserve
  * Don't carry multiple Ankhs since you'll lose them upon resurrection
  * Be cautious when equipping cursed items - if a cursed item kills you during equipping, the Ankh will be consumed but won't prevent the death

==== Technical Details ====
When the hero dies and uses an Ankh for resurrection:
  * ''Dungeon.gameOver()'' is called, which deletes the current game save via ''Dungeon.deleteGame(false)'' in [[https://github.com/NYRDS/remixed-dungeon/blob/master/RemixedDungeon/src/main/java/com/watabou/pixeldungeon/windows/WndResurrect.java#L56|WndResurrect.java#L56]]
  * The game state is completely removed, including the hero's inventory
  * ''Bones.leave(hero)'' preserves one random equipped item (or gold if no useful equipped item exists)
  * The hero is reborn with full HP but in a fresh game state
  * All inventory items (except the one preserved as bones) are permanently lost
  * The ankh use is tracked in statistics via ''Statistics.ankhsUsed++'' as seen in [[https://github.com/NYRDS/remixed-dungeon/blob/master/RemixedDungeon/src/main/java/com/watabou/pixeldungeon/windows/WndResurrect.java#L59|WndResurrect.java#L59]]

==== Related ====
  * [[en:rpd:belongings|Belongings]] - Hero equipment and inventory system
  * [[en:rpd:raise_dead_spell|Raise Dead Spell]] - Other resurrection mechanics
  * [[en:rpd:black_skull_item|Black Skull]] - Similar bones/preservation mechanic

==== Source Code References ====
  * Core implementation: [[https://github.com/NYRDS/remixed-dungeon/blob/master/RemixedDungeon/src/main/java/com/watabou/pixeldungeon/items/Ankh.java|Ankh.java]]
  * Resurrection dialog: [[https://github.com/NYRDS/remixed-dungeon/blob/master/RemixedDungeon/src/main/java/com/watabou/pixeldungeon/windows/WndResurrect.java|WndResurrect.java]]
  * Bones preservation: [[https://github.com/NYRDS/remixed-dungeon/blob/master/RemixedDungeon/src/main/java/com/watabou/pixeldungeon/Bones.java|Bones.java]]
  * Hero death handling: [[https://github.com/NYRDS/remixed-dungeon/blob/master/RemixedDungeon/src/main/java/com/watabou/pixeldungeon/actors/hero/Hero.java#L610|Hero.java#L610]] (resurrection call)
  * Item registration: [[https://github.com/NYRDS/remixed-dungeon/blob/master/RemixedDungeon/src/main/java/com/nyrds/pixeldungeon/items/common/ItemFactory.java#L233|ItemFactory.java#L233]]
  * Statistics tracking: [[https://github.com/NYRDS/remixed-dungeon/blob/master/RemixedDungeon/src/main/java/com/watabou/pixeldungeon/Statistics.java#L15|Statistics.java#L15]] (ankhsUsed counter)
  * Game save deletion: [[https://github.com/NYRDS/remixed-dungeon/blob/master/RemixedDungeon/src/main/java/com/watabou/pixeldungeon/Dungeon.java#L228|Dungeon.deleteGame()]] - deletes save when ankh is used
  * Inventory handling during resurrection: [[https://github.com/NYRDS/remixed-dungeon/blob/master/RemixedDungeon/src/main/java/com/watabou/pixeldungeon/windows/WndResurrect.java#L56|WndResurrect.java#L56]] - game state reset
  * Ankh collection logic: [[https://github.com/NYRDS/remixed-dungeon/blob/master/RemixedDungeon/src/main/java/com/watabou/pixeldungeon/items/Item.java#L62|Item.collect()]] - how ankh is added to inventory
  * Belongings system: [[https://github.com/NYRDS/remixed-dungeon/blob/master/RemixedDungeon/src/main/java/com/watabou/pixeldungeon/actors/hero/Belongings.java|Belongings.java]] - inventory management
  * Equipment handling: [[https://github.com/NYRDS/remixed-dungeon/blob/master/RemixedDungeon/src/main/java/com/watabou/pixeldungeon/actors/hero/ItemSlot.java|ItemSlot.java]] - shows which item is preserved as bones
  * Death cause tracking: [[https://github.com/NYRDS/remixed-dungeon/blob/master/RemixedDungeon/src/main/java/com/nyrds/pixeldungeon/mechanics/NamedEntityKind.java|NamedEntityKind.java]] - tracks reason for death
  * Cursed item handling: [[https://github.com/NYRDS/remixed-dungeon/blob/master/RemixedDungeon/src/main/java/com/watabou/pixeldungeon/items/Item.java|Item cursed logic]] - why ankh won't save from cursed equipping
  * Game over state: [[https://github.com/NYRDS/remixed-dungeon/blob/master/RemixedDungeon/src/main/java/com/watabou/pixeldungeon/Dungeon.java#L207|Dungeon.gameOver()]] - called during resurrection
  * JSON configuration: [[https://github.com/NYRDS/remixed-dungeon/blob/master/RemixedDungeon/src/main/assets/itemsDesc/Ankh.json|Ankh.json]] - item properties defined in JSON

==== String Resources ====
  * Ankh name: [[https://github.com/NYRDS/remixed-dungeon/blob/master/RemixedDungeon/src/main/res/values/strings_all.xml#L1404|Ankh_Name]] (line 1404 in English strings)
  * Resurrection dialog messages: [[https://github.com/NYRDS/remixed-dungeon/blob/master/RemixedDungeon/src/main/res/values/strings_all.xml#L1405|WndResurrect_Message]], [[https://github.com/NYRDS/remixed-dungeon/blob/master/RemixedDungeon/src/main/res/values/strings_all.xml#L1406|WndResurrect_Yes]], [[https://github.com/NYRDS/remixed-dungeon/blob/master/RemixedDungeon/src/main/res/values/strings_all.xml#L1407|WndResurrect_No]] (lines 1405-1407 in English strings)
  * Russian strings: [[https://github.com/NYRDS/remixed-dungeon/blob/master/RemixedDungeon/src/main/res/values-ru/strings_all.xml#L1404|Ankh_Name in Russian]], [[https://github.com/NYRDS/remixed-dungeon/blob/master/RemixedDungeon/src/main/res/values-ru/strings_all.xml#L1405-L1407|WndResurrect messages in Russian]]
  * Chinese strings: [[https://github.com/NYRDS/remixed-dungeon/blob/master/RemixedDungeon/src/main/res/values-zh-rCN/strings_all.xml#L1404|Ankh_Name in Chinese]], [[https://github.com/NYRDS/remixed-dungeon/blob/master/RemixedDungeon/src/main/res/values-zh-rCN/strings_all.xml#L1405-L1407|WndResurrect messages in Chinese]]
  * Spanish strings: [[https://github.com/NYRDS/remixed-dungeon/blob/master/RemixedDungeon/src/main/res/values-es/strings_all.xml#L1404|Ankh_Name in Spanish]], [[https://github.com/NYRDS/remixed-dungeon/blob/master/RemixedDungeon/src/main/res/values-es/strings_all.xml#L1405-L1407|WndResurrect messages in Spanish]]

==== JSON Configuration Files ====
  * Item drop rates: Not configured in JSON files, handled in code through Treasure.getLevelTreasury() and Treasury.getLevelTreasury()

==== Machine-Readable Data ====
  * [[mr:ankh_item|mr:ankh_item]] - Machine-readable reference page with technical details

{{tag> rpd items resurrection}}
