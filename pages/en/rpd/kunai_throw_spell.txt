====== Kunai Throw ======

{{ rpd:images:kunai_throw_spell_icon.png|Kunai Throw Spell Icon }}

**Kunai Throw** is a spell in Remixed Pixel Dungeon (Rogue Affinity).

==== Description ====
This spell throws Kunai at random visible enemies extremely fast. The number of Kunai thrown depends on the caster's skill level, with more Kunai thrown at higher levels. The spell is so fast that you can't select the target.

==== Stats ====
  * **Magic Affinity:** [[en:rpd:rogue_class|Rogue]]
  * **Targeting:** self (targets random visible [[en:rpd:enemies_overview|enemies]])
  * **Level:** 2
  * **[[en:rpd:mana_mechanic|Mana]] Cost:** 5
  * **Cast Time:** 0.01 (extremely fast)
  * **Spell Image:** Uses different icons based on spell tier (1, 9, or 17 depending on tier)

==== Mechanics ====
  * **Number of Kunai:** min(caster:skillLevel() - spellLevel + 1, 3) - maximum of 3 [[en:rpd:kunai_item|kunai]]
  * **Damage:** Random damage between n and (n + caster:lvl() * n), where n is the number of [[en:rpd:kunai_item|kunai]] thrown
  * **Targeting:** Automatically targets random [[en:rpd:enemies_overview|enemies]] visible to the caster
  * **Zap Effect:** Shows a "Kunai" [[en:rpd:zap_effects|zap effect]] from caster to target
  * **Requirement:** Requires at least one visible [[en:rpd:enemies_overview|enemy]] to cast

==== Usage ====
The Kunai Throw spell can be used for:
  * Offensive applications against [[en:rpd:enemies_overview|enemies]]
  * Quick burst damage in [[en:rpd:combat|combat]]
  * Surprising enemies with fast, unavoidable attacks

==== Classes ====
Classes that can use this spell include:
  * Classes with Rogue affinity (e.g., [[en:rpd:rogue_class|Rogue class]])
  * Other classes that gain access through special means

==== Strategy ====
How to effectively use the Kunai Throw spell:
  * Best used when multiple enemies are visible to potentially hit several targets
  * More effective at higher skill levels when more Kunai can be thrown
  * Quick cast time makes it useful in tight situations
  * Works well when enemies are grouped together
  * Since it targets random enemies, it's useful when you don't need to target a specific one

==== Technical Details ====
  * Implementation: [[https://github.com/NYRDS/remixed-dungeon/blob/master/scripts/spells/KunaiThrow.lua|KunaiThrow.lua]]
  * Class: Lua script implementing the spell system
  * Spell availability: [[https://github.com/NYRDS/remixed-dungeon/blob/master/RemixedDungeon/src/main/assets/scripts/spells/CustomSpellsList.lua#L12|CustomSpellsList.lua]] - available to Rogue class
  * String resources: [[https://github.com/NYRDS/remixed-dungeon/blob/master/RemixedDungeon/src/main/res/values/strings_all.xml#L2626|KunaiThrow_Name]] and [[https://github.com/NYRDS/remixed-dungeon/blob/master/RemixedDungeon/src/main/res/values/strings_all.xml#L2627|KunaiThrow_Info]]
  * Russian string resources: [[https://github.com/NYRDS/remixed-dungeon/blob/master/RemixedDungeon/src/main/res/values-ru/strings_all.xml#L2627-L2628|KunaiThrow_Name Ð¸ KunaiThrow_Info]]
  * Spell system library: [[https://github.com/NYRDS/remixed-dungeon/blob/master/RemixedDungeon/src/main/assets/scripts/lib/spell.lua|spell.lua]]
  * Common classes library: [[https://github.com/NYRDS/remixed-dungeon/blob/master/RemixedDungeon/src/main/assets/scripts/lib/commonClasses.lua|commonClasses.lua]]
  * Spell parameters: [[https://github.com/NYRDS/remixed-dungeon/blob/master/RemixedDungeon/src/main/assets/scripts/spells/KunaiThrow.lua#L7-L15|level = 2, castTime = 0.01, spellCost = 5]]
  * Tier calculation: [[https://github.com/NYRDS/remixed-dungeon/blob/master/RemixedDungeon/src/main/assets/scripts/spells/KunaiThrow.lua#L5-L6|math.min(caster:skillLevel() - spellLevel + 1, 3)]] - calculates number of kunai thrown (max 3)
  * Damage calculation: [[https://github.com/NYRDS/remixed-dungeon/blob/master/RemixedDungeon/src/main/assets/scripts/spells/KunaiThrow.lua#L33|math.random( n, n + caster:lvl()*n )]] - damage range based on number of kunai and caster level
  * Zap effect: [[https://github.com/NYRDS/remixed-dungeon/blob/master/RemixedDungeon/src/main/assets/scripts/spells/KunaiThrow.lua#L32|RPD.zapEffect(ownPos,tgt:getPos(),"Kunai")]] - visual effect from caster to target
  * Target selection: [[https://github.com/NYRDS/remixed-dungeon/blob/master/RemixedDungeon/src/main/assets/scripts/spells/KunaiThrow.lua#L29|caster:randomEnemy()]] - randomly selects visible enemy as target
  * Visible enemies check: [[https://github.com/NYRDS/remixed-dungeon/blob/master/RemixedDungeon/src/main/assets/scripts/spells/KunaiThrow.lua#L27|caster:visibleEnemies()]] - ensures at least one enemy is visible before casting
  * Image mapping: [[https://github.com/NYRDS/remixed-dungeon/blob/master/RemixedDungeon/src/main/assets/scripts/spells/KunaiThrow.lua#L36-L38|lvl2img = {1,9,17} based on spell tier]] - different icon based on number of kunai
  * Magic affinity: [[https://github.com/NYRDS/remixed-dungeon/blob/master/RemixedDungeon/src/main/assets/scripts/spells/KunaiThrow.lua#L13|Magic Affinity: "Rogue"]] - only available to Rogue-affinity classes
  * Targeting type: [[https://github.com/NYRDS/remixed-dungeon/blob/master/RemixedDungeon/src/main/assets/scripts/spells/KunaiThrow.lua#L12|Targeting: "self"]] - targets random visible enemies automatically
  * Common classes library: [[https://github.com/NYRDS/remixed-dungeon/blob/master/RemixedDungeon/src/main/assets/scripts/lib/commonClasses.lua|commonClasses.lua]]
  * Spell initialization: [[https://github.com/NYRDS/remixed-dungeon/blob/master/RemixedDungeon/src/main/assets/scripts/spells/KunaiThrow.lua#L20-L40|return spell.init{}]] - defines the spell structure and behavior
  * Damage system integration: [[https://github.com/NYRDS/remixed-dungeon/blob/master/RemixedDungeon/src/main/assets/scripts/spells/KunaiThrow.lua#L33|tgt:damage()]] - calls the game's damage system to apply damage to target
  * Number of Kunai calculation: [[https://github.com/NYRDS/remixed-dungeon/blob/master/RemixedDungeon/src/main/assets/scripts/spells/KunaiThrow.lua#L25|local n = spellTier(caster)]] - calculates kunai count based on caster's skill level
  * Spell casting validation: [[https://github.com/NYRDS/remixed-dungeon/blob/master/RemixedDungeon/src/main/assets/scripts/spells/KunaiThrow.lua#L27-L28]] - checks if any visible enemies exist before casting
  * Class availability: [[https://github.com/NYRDS/remixed-dungeon/blob/master/RemixedDungeon/src/main/assets/scripts/spells/CustomSpellsList.lua#L12|spells["Rogue"] = {"Cloak","Backstab","KunaiThrow","Haste"}]] - available to Rogue class
  * Zap effect types: [[https://github.com/NYRDS/remixed-dungeon/blob/master/RemixedDungeon/src/main/java/com/nyrds/platform/specific/Implementations.java#L34-L69|Implementations.java]] - defines available zap effects including "Kunai" effect
  * Damage system reference: [[https://github.com/NYRDS/remixed-dungeon/blob/master/RemixedDungeon/src/main/java/com/watabou/pixeldungeon/actors/Char.java#L85-L88|Char:damage() method]] - handles damage calculation and application
  * Character level reference: [[https://github.com/NYRDS/remixed-dungeon/blob/master/RemixedDungeon/src/main/java/com/watabou/pixeldungeon/actors/Char.java#L12-L13|Char:lvl() method]] - caster level affects damage calculation
  * Target position: [[https://github.com/NYRDS/remixed-dungeon/blob/master/RemixedDungeon/src/main/java/com/watabou/pixeldungeon/actors/Char.java#L10-L11|Char:getPos() method]] - gets character position for zap effect
  * Random enemy selection: [[https://github.com/NYRDS/remixed-dungeon/blob/master/RemixedDungeon/src/main/java/com/nyrds/pixeldungeon/actors/CharUtils.java#L15-L25|CharUtils:randomEnemy() method]] - provides random enemy selection functionality
  * Visible enemies check: [[https://github.com/NYRDS/remixed-dungeon/blob/master/RemixedDungeon/src/main/java/com/nyrds/pixeldungeon/actors/CharUtils.java#L27-L35|CharUtils:visibleEnemies() method]] - checks for visible enemies in the level
  * Character interface: [[https://github.com/NYRDS/remixed-dungeon/blob/master/RemixedDungeon/src/main/java/com/watabou/pixeldungeon/actors/Char.java|Char.java]] - base class for all characters (player, mobs, etc.)
  * Skill level reference: [[https://github.com/NYRDS/remixed-dungeon/blob/master/RemixedDungeon/src/main/java/com/nyrds/pixeldungeon/actors/CharUtils.java#L12-L13|CharUtils:skillLevel() method]] - gets the character's skill level
  * RPD API: [[https://github.com/NYRDS/remixed-dungeon/blob/master/RemixedDungeon/src/main/java/com/nyrds/pixeldungeon/Utils/RpdScriptUtils.java|RPDScriptUtils.java]] - provides Lua interface for game functionality
  * Zap effects implementation: [[https://github.com/NYRDS/remixed-dungeon/blob/master/RemixedDungeon/src/main/java/com/watabou/pixeldungeon/effects/ZapGlow.java|ZapGlow.java]] - renders zap effects
  * Lua integration: [[https://github.com/NYRDS/remixed-dungeon/blob/master/RemixedDungeon/src/main/java/com/nyrds/platform/specific/LuaEngine.java|LuaEngine.java]] - integrates Lua scripts with game engine
  * Spell casting flow: [[https://github.com/NYRDS/remixed-dungeon/blob/master/RemixedDungeon/src/main/java/com/nyrds/pixeldungeon/spells/LuaSpell.java#L15-L25|LuaSpell:cast() method]] - handles Lua spell invocation
  * Spell system: [[https://github.com/NYRDS/remixed-dungeon/blob/master/RemixedDungeon/src/main/java/com/nyrds/pixeldungeon/spells/Spell.java|Spell.java]] - base spell class in Java
  * Spell sprites: [[https://github.com/NYRDS/remixed-dungeon/blob/master/RemixedDungeon/src/main/assets/spellsIcons/rogue.png|rogue.png]] - sprite image file containing spell icons
  * Machine-readable data: [[mr:kunai_throw_spell|mr:kunai_throw_spell]]

==== Flavor Text ====
From the game: "This Deadly Kunai throw will be done extremely fast, so fast that you won't even be able to select a target.\n\nTrue Masters able to throw more than one Kunai at once."

==== See Also ====
  * [[en:rpd:spells_overview|Spells]]
  * [[en:rpd:spell|Spell System]]
  * [[en:rpd:mechanics|Game Mechanics]]
  * [[en:rpd:rogue_class|Rogue Affinity]]
  * [[en:rpd:kunai_item|Kunai Item]]
  * [[en:rpd:melee_weapons|Melee Weapons]]
  * [[en:rpd:ranged_weapons|Ranged Weapons]]

{{tag> rpd spells rogue }}
