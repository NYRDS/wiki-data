====== Hide in Grass Spell ======

{{ rpd:images:hide_in_grass_spell.png|Hide in Grass Spell }}

**Hide in Grass** is a spell in Remixed Dungeon associated with the [[en:rpd:elf_class|Elf class]] that provides temporary invisibility when in grassy terrain.

==== Item Overview ====
  * **Type:** [[en:rpd:spell|Spell]]
  * **Magic Affinity:** [[en:rpd:elf_class|Elf]]
  * **Targeting:** Self
  * **Level:** 2
  * **[[en:rpd:mana_mechanic|Mana Cost]]:** 5 (spellCost)
  * **Cooldown:** 10 turns
  * **Cast Time:** 0.1 turns
  * **Duration:** Caster's skill level * 5 turns

==== Special Mechanics ====
  * **Invisibility Effect:** Applies the [[en:rpd:cloak_buff|Cloak Buff]] which makes the character invisible (same buff as [[en:rpd:cloak_spell|Cloak spell]])
  * **Terrain Requirement:** Can only be used when caster is standing on grass (GRASS) or high grass (HIGH_GRASS) terrain
  * **Stealth Bonus:** Provides stealth bonus: Caster's skill level + caster's level / 4
  * **Invisible Status:** Character becomes invisible with the hidden visual effect
  * **Terrain Check:** If not on grass terrain, the spell fails with the message "Even I can't hide in plain sight." (from string resources)
  * **Effect Duration:** Duration is calculated as caster's skill level * 5 turns
  * **Visual Effect:** Triggers "hide_in_grass" visual effect when cast successfully

==== Strategy ====
  * Position yourself near grassy terrain before needing to use this spell
  * Use to escape from enemies by hiding in grass when being chased
  * The spell has a shorter cooldown than [[en:rpd:cloak_spell|Cloak spell]], making it more readily available
  * Combine with the Elf's natural ability to move through grass without triggering traps
  * Use during boss fights when near grassy areas for temporary invisibility
  * Essential skill for Elf subclass players to master
  * Best used for tactical retreats rather than offensive purposes
  * Consider the duration when planning invisibility-based strategies
  * Effective for avoiding detection during exploration

==== Obtaining ====
  * Generally available to [[en:rpd:elf_class|Elf class]] players with [[en:rpd:elf_affinity|Elf affinity]]
  * Acquired through class-specific progression systems
  * Part of the [[en:rpd:elf_affinity|Elf]] spell system

==== Effect ====
When cast successfully on grass or high grass terrain, the Hide in Grass spell applies the Cloak buff for a duration of (caster's skill level * 5) turns, making the character invisible. The spell will fail if cast outside of grassy terrain with the message "Even I can't hide in plain sight." The invisibility effect provides a stealth bonus and prevents enemies from targeting the character while active.

==== Code References ====
  * **Lua Implementation:** [[https://github.com/NYRDS/remixed-dungeon/blob/master/RemixedDungeon/src/main/assets/scripts/spells/HideInGrass.lua|HideInGrass.lua]]
  * **Cloak Buff Implementation:** [[https://github.com/NYRDS/remixed-dungeon/blob/master/RemixedDungeon/src/main/assets/scripts/buffs/Cloak.lua|Cloak.lua]]
  * **Spell Base Class:** [[https://github.com/NYRDS/remixed-dungeon/blob/master/RemixedDungeon/src/main/assets/scripts/lib/spell.lua|spell.lua]]
  * **Terrain Constants:** [[https://github.com/NYRDS/remixed-dungeon/blob/master/RemixedDungeon/src/main/java/com/watabou/pixeldungeon/levels/Terrain.java|Terrain.java]] - Defines GRASS and HIGH_GRASS constants
  * **Visual Effect:** [[https://github.com/NYRDS/remixed-dungeon/blob/master/RemixedDungeon/src/main/assets/scripts/spells/HideInGrass.lua#L23|HideInGrass.lua#L23]] - RPD.topEffect(caster:getPos(),"hide_in_grass") for visual effect
  * **Buff Application:** [[https://github.com/NYRDS/remixed-dungeon/blob/master/RemixedDungeon/src/main/assets/scripts/spells/HideInGrass.lua#L24|HideInGrass.lua#L24]] - RPD.affectBuff(caster,"Cloak", duration) to apply invisibility
  * **Terrain Check:** [[https://github.com/NYRDS/remixed-dungeon/blob/master/RemixedDungeon/src/main/assets/scripts/spells/HideInGrass.lua#L20-L22|HideInGrass.lua#L20-L22]] - Verifies grass or high grass terrain
  * **Failure Message:** [[https://github.com/NYRDS/remixed-dungeon/blob/master/RemixedDungeon/src/main/assets/scripts/spells/HideInGrass.lua#L27|HideInGrass.lua#L27]] - Uses string resource "HideInGrassSpell_NeedGrassToHide"
  * **Duration Calculation:** [[https://github.com/NYRDS/remixed-dungeon/blob/master/RemixedDungeon/src/main/assets/scripts/spells/HideInGrass.lua#L15|HideInGrass.lua#L15]] - Duration = caster:skillLevel() * 5
  * **Stealth Bonus:** [[https://github.com/NYRDS/remixed-dungeon/blob/master/RemixedDungeon/src/main/assets/scripts/buffs/Cloak.lua#L16-L18|Cloak.lua#L16-L18]] - stealthBonus function in Cloak.lua
  * **English String Resources:** [[https://github.com/NYRDS/remixed-dungeon/blob/master/RemixedDungeon/src/main/res/values/strings_all.xml#L2689-L2691|HideInGrassSpell_Name, HideInGrassSpell_Info, HideInGrassSpell_NeedGrassToHide]] (HideInGrassSpell strings)
  * **Russian String Resources:** [[https://github.com/NYRDS/remixed-dungeon/blob/master/RemixedDungeon/src/main/res/values-ru/strings_all.xml#L2691-L2693|HideInGrassSpell strings]] (Russian localization)
  * **Spanish String Resources:** [[https://github.com/NYRDS/remixed-dungeon/blob/master/RemixedDungeon/src/main/res/values-es/strings_all.xml#L2689-L2691|HideInGrassSpell strings]] (Spanish localization)
  * **French String Resources:** [[https://github.com/NYRDS/remixed-dungeon/blob/master/RemixedDungeon/src/main/res/values-fr/strings_all.xml#L2689-L2691|HideInGrassSpell strings]] (French localization)
  * **German String Resources:** [[https://github.com/NYRDS/remixed-dungeon/blob/master/RemixedDungeon/src/main/res/values-de/strings_all.xml#L2689-L2691|HideInGrassSpell strings]] (German localization)
  * **Chinese String Resources:** [[https://github.com/NYRDS/remixed-dungeon/blob/master/RemixedDungeon/src/main/res/values-zh-rCN/strings_all.xml#L2689-L2691|HideInGrassSpell strings]] (Chinese localization)
  * **Stats verification:** Extracted directly from HideInGrass.lua spell definition
  * **Effect descriptions:** Based on code analysis and string resources
  * **mr: namespace:** Check [[mr:hide_in_grass_spell]] for machine-readable data

==== Related Items ====
  * [[en:rpd:spells|Spells]] - General information about spells
  * [[en:rpd:cloak_spell|Cloak Spell]] - Related invisibility spell
  * [[en:rpd:cloak_buff|Cloak Buff]] - The invisibility effect applied
  * [[en:rpd:invisibility_buff|Invisibility]] - General invisibility mechanics
  * [[en:rpd:elf_class|Elf Class]] - Class that typically uses this spell
  * [[en:rpd:elf_affinity|Elf Affinity]] - Affinity related to this spell
  * [[en:rpd:mechanics|Game Mechanics]] - General game mechanics
  * [[en:rpd:grass|Grass Terrain]] - Terrain required for the spell
  * [[en:rpd:high_grass|High Grass]] - Alternative terrain for the spell

{{tag> rpd spells elf stealth invisibility }}
