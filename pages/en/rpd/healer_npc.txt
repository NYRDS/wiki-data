====== Healer NPC ======

{{ rpd:images:healernpc_sprite.png|Healer NPC }}

The **Healer NPC** is a non-player character found in town who provides healing services and plays a role in unlocking the Gnoll Guardian subclass.

==== Description ====
The Healer NPC is found in the town area and provides healing services in exchange for gold. The Healer can heal both the player character and their pet companions.

==== Services ====
  * **Hero Healing:** Heals the player character completely and satisfies hunger for approximately 75 gold (base cost, affected by difficulty and Ring of Haggler)
  * **Pet Healing:** Heals all pet companions completely and satisfies their hunger for approximately 50 gold per pet (base cost, affected by difficulty and Ring of Haggler)
  * **Hunger Satisfaction:** Satisfies hunger for all healed characters (cures starving status)

==== Special Interaction - Gnoll Subclass Unlock ====
  * The Healer plays a crucial role in unlocking the [[en:rpd:guardian_subclass|Guardian]] subclass for the [[en:rpd:gnoll_class|Gnoll]] hero class
  * When the player brings a [[en:rpd:brute_mob|Brute]] mob to the Healer and pays to heal it, this action triggers the "Gnoll Unlocked" badge
  * Once the badge is earned, Gnoll characters will automatically receive the [[en:rpd:tome_of_mastery_item|Tome of Mastery]] at the start of the game to choose the [[en:rpd:guardian_subclass|Guardian]] subclass

==== Cost ====
  * Hero healing: Base 75 gold, multiplied by difficulty factor and potentially reduced by [[en:rpd:ring_of_haggler_item|Ring of Haggler]] (-10%)
  * Pet healing: Base 50 gold per pet, multiplied by difficulty factor and potentially reduced by [[en:rpd:ring_of_haggler_item|Ring of Haggler]] (-10%)
  * Healing cost is dynamically adjusted based on game difficulty via GameLoop.getDifficultyFactor()

==== Strategy ====
  * Visit the Healer early in the game if you need to restore health or satisfy hunger
  * Bring pet companions to the Healer when they take damage during dungeon exploration
  * For Gnoll players, consider finding and escorting a [[en:rpd:brute_mob|Brute]] to the Healer to unlock the [[en:rpd:guardian_subclass|Guardian]] subclass
  * The Healer occasionally speaks messages when the hero is nearby (within distance of 4 tiles), with 5% chance per turn

==== Code Implementation Details ====
Based on the Java source code:
  * **Immobile**: Set as immovable (movable = false)
  * **Interaction**: Opens WndPriest window when interacted with
  * **Messages**: Randomly speaks one of three messages when hero is nearby (within L2 distance of 4): "Free treatment for every adventurer!", "Come back anytime you feel sick or hungry!", or "I wonder why the church doesn't allow us to wear hats... it's really cold out here."
  * **Pet Treatment**: The healer treats all pets as well as the hero, using PotionOfHealing.heal() with full healing (1.0f) for each patient
  * **Brute Healing Unlock**: When a mob with entity kind "Brute" is healed by the priest, it validates the Gnoll unlock badge via Badges.validateGnollUnlocked()

==== Source Code Reference ====
  * [[https://github.com/NYRDS/remixed-dungeon/blob/master/RemixedDungeon/src/main/java/com/nyrds/pixeldungeon/mobs/npc/HealerNPC.java|HealerNPC.java]]
  * [[https://github.com/NYRDS/remixed-dungeon/blob/master/RemixedDungeon/src/main/java/com/nyrds/pixeldungeon/windows/WndPriest.java|WndPriest.java]] (interaction window)
  * [[https://github.com/NYRDS/remixed-dungeon/blob/master/RemixedDungeon/src/main/java/com/watabou/pixeldungeon/Badges.java#L1052|Badges.java]] (validation for Gnoll unlock)
  * String Resources (English): [[https://github.com/NYRDS/remixed-dungeon/blob/master/RemixedDungeon/src/main/res/values/strings_all.xml#L1666-L1672|HealerNPC strings (line 1666-1672)]]
  * String Resources (Russian): [[https://github.com/NYRDS/remixed-dungeon/blob/master/RemixedDungeon/src/main/res/values-ru/strings_all.xml#L1667-L1673|HealerNPC strings (line 1667-1673)]]
  * String Resources for WndPriest (English): [[https://github.com/NYRDS/remixed-dungeon/blob/master/RemixedDungeon/src/main/res/values/strings_all.xml#L1686-L1689|WndPriest strings (line 1686-1689)]]

==== See Also ====
  * [[en:rpd:npcs|NPCs]]
  * [[en:rpd:gnoll_class|Gnoll]] - Hero class
  * [[en:rpd:guardian_subclass|Guardian]] - Subclass unlocked via this NPC
  * [[en:rpd:brute_mob|Brute]] - The mob that needs healing
  * [[en:rpd:tome_of_mastery_item|Tome of Mastery]]
  * [[en:rpd:rings|Rings]]
  * [[en:rpd:ring_of_haggler_item|Ring of Haggler]]

{{tag> rpd npcs town quest}}