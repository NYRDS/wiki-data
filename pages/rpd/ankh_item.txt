====== Ankh ======

{{ rpd:images:ankh_item.png|Ankh }}

==== Description ====
This ancient symbol of immortality grants an ability to return to life after death. Upon resurrection, all items in the hero's inventory are lost, but one random equipped item is preserved as bones that can be retrieved from the location of death.

==== Special Properties ====
  * Provides one-time resurrection after death (implemented in [[https://github.com/NYRDS/remixed-dungeon/blob/master/RemixedDungeon/src/main/java/com/watabou/pixeldungeon/items/Ankh.java#L18-L30|Ankh.resurrect method]])
  * Upon resurrection, all items in the backpack are lost (handled in [[https://github.com/NYRDS/remixed-dungeon/blob/master/RemixedDungeon/src/main/java/com/watabou/pixeldungeon/windows/WndResurrect.java#L41-L43|WndResurrect]])
  * Equipped items are NOT preserved directly - instead, one random equipped item is left as bones at the death location (implemented in [[https://github.com/NYRDS/remixed-dungeon/blob/master/RemixedDungeon/src/main/java/com/watabou/pixeldungeon/Bones.java#L32-L39|Bones.leave method]])
  * Single use item (removed after use in [[https://github.com/NYRDS/remixed-dungeon/blob/master/RemixedDungeon/src/main/java/com/watabou/pixeldungeon/items/Ankh.java#L22|resurrect method]])
  * Stackable (though only one is useful at a time due to loss upon resurrection) (defined in [[https://github.com/NYRDS/remixed-dungeon/blob/master/RemixedDungeon/src/main/java/com/watabou/pixeldungeon/items/Ankh.java#L11|constructor]])
  * No upgrade potential (defined in [[https://github.com/NYRDS/remixed-dungeon/blob/master/RemixedDungeon/src/main/java/com/watabou/pixeldungeon/items/Ankh.java#L43|isUpgradable method]])
  * Always identified (defined in [[https://github.com/NYRDS/remixed-dungeon/blob/master/RemixedDungeon/src/main/java/com/watabou/pixeldungeon/items/Ankh.java#L47|isIdentified method]])
  * Costs 50 gold per unit (defined in [[https://github.com/NYRDS/remixed-dungeon/blob/master/RemixedDungeon/src/main/java/com/watabou/pixeldungeon/items/Ankh.java#L51|price method]])

==== Notes ====
The Ankh is a powerful but risky item - it can save you from death, but at the cost of losing all your inventory. Only one random equipped item will be recoverable as bones from the place where you died.

==== Strategy ====
  * Best used as a last resort when facing certain death
  * Try to keep only essential items in your inventory when entering dangerous areas
  * Since only one equipped item is preserved as bones (not all equipped items), consider which item is most valuable to preserve
  * Don't carry multiple Ankhs since you'll lose them upon resurrection

==== Technical Details ====
When the hero dies and uses an Ankh for resurrection:
  * ''Dungeon.gameOver()'' is called, which deletes the current game save via ''Dungeon.deleteGame(true)''
  * The game state is completely removed, including the hero's inventory
  * ''Bones.leave(hero)'' preserves one random equipped item (or gold if no useful equipped item exists)
  * The hero is reborn with full HP but in a fresh game state
  * All inventory items (except the one preserved as bones) are permanently lost

==== Related ====
  * [[rpd:belongings|Belongings]] - Hero equipment and inventory system
  * [[rpd:raise_dead_spell|Raise Dead Spell]] - Other resurrection mechanics
  * [[rpd:black_skull_item|Black Skull]] - Similar bones/preservation mechanic

==== Source Code References ====
  * Core implementation: [[https://github.com/NYRDS/remixed-dungeon/blob/master/RemixedDungeon/src/main/java/com/watabou/pixeldungeon/items/Ankh.java|Ankh.java]]
  * Resurrection dialog: [[https://github.com/NYRDS/remixed-dungeon/blob/master/RemixedDungeon/src/main/java/com/watabou/pixeldungeon/windows/WndResurrect.java|WndResurrect.java]]
  * Bones preservation: [[https://github.com/NYRDS/remixed-dungeon/blob/master/RemixedDungeon/src/main/java/com/watabou/pixeldungeon/Bones.java|Bones.java]]
  * Hero death handling: [[https://github.com/NYRDS/remixed-dungeon/blob/master/RemixedDungeon/src/main/java/com/watabou/pixeldungeon/actors/hero/Hero.java#L599|Hero.java#L599]] (resurrection call)
  * Game over mechanics: [[https://github.com/NYRDS/remixed-dungeon/blob/master/RemixedDungeon/src/main/java/com/watabou/pixeldungeon/Dungeon.java#L796|Dungeon.java#L796]] (resurrection check)
  * Item registration: [[https://github.com/NYRDS/remixed-dungeon/blob/master/RemixedDungeon/src/main/java/com/nyrds/pixeldungeon/items/common/ItemFactory.java#L243|ItemFactory.java#L243]]
  * Statistics tracking: [[https://github.com/NYRDS/remixed-dungeon/blob/master/RemixedDungeon/src/main/java/com/watabou/pixeldungeon/Statistics.java#L15|Statistics.java#L15]] (ankhsUsed counter)

==== String Resources ====
  * Ankh name: [[https://github.com/NYRDS/remixed-dungeon/blob/master/RemixedDungeon/src/main/res/values/strings_all.xml#L3783|Ankh_Name]] (line 3783 in English strings)
  * Resurrection dialog messages: [[https://github.com/NYRDS/remixed-dungeon/blob/master/RemixedDungeon/src/main/res/values/strings_all.xml#L3784|WndResurrect_Message]], [[https://github.com/NYRDS/remixed-dungeon/blob/master/RemixedDungeon/src/main/res/values/strings_all.xml#L3785|WndResurrect_Yes]], [[https://github.com/NYRDS/remixed-dungeon/blob/master/RemixedDungeon/src/main/res/values/strings_all.xml#L3786|WndResurrect_No]] (lines 3784-3786 in English strings)
  * Russian strings: [[https://github.com/NYRDS/remixed-dungeon/blob/master/RemixedDungeon/src/main/res/values-ru/strings_all.xml#L3783]] - [[https://github.com/NYRDS/remixed-dungeon/blob/master/RemixedDungeon/src/main/res/values-ru/strings_all.xml#L3786|lines 3783-3786]]

{{tag> rpd items resurrection}}
