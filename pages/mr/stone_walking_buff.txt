====== Stone Walking Buff - Code References ======

The **Stone Walking** buff is an artifact buff applied by the [[en:rpd:ring_of_stone_walking_item|Ring of Stone Walking]]. It is a doom buff that triggers a special death condition when the hero dies while affected by it.

===== Java Classes =====

**Buff Implementation:**
  * `com/watabou/pixeldungeon/items/rings/RingOfStoneWalking.java` - Ring and buff implementation
  * Inner class: `RingOfStoneWalking.StoneWalking` extends `ArtifactBuff` implements `Doom`
  * Buff factory registration: `com/nyrds/pixeldungeon/mechanics/buffs/BuffFactory.java`
    - Constant: `RING_OF_STONE_WALKING`
    - Registered buff class: `RingOfStoneWalking.StoneWalking.class`

**Key Methods:**
<code java>
// In RingOfStoneWalking.java
public static class StoneWalking extends ArtifactBuff implements Doom {
    @Override
    public int icon() {
        return BuffIndicator.STONEBLOOD;
    }

    @Override
    public String name() {
        return StringsManager.getVar(R.string.StoneBloodBuff_Name);
    }

    @Override
    public String desc() {
        return StringsManager.getVar(R.string.StoneBloodBuff_Info);
    }

    @Override
    public void onHeroDeath() {
        Badges.validateDeathInStone();
        Dungeon.fail(Utils.format(ResultDescriptions.getDescription(ResultDescriptions.Reason.IMMURED), Dungeon.depth));
        GLog.n(StringsManager.getVar(R.string.RingOfStoneWalking_ImmuredInStone));
    }
}
</code>

===== JSON Configuration =====

**Item Configuration:**
  * `RemixedDungeon/src/main/assets/spritesDesc/rings.json` - Ring sprite configuration
  * Item image: `ItemSpriteSheet.RING_OF_STONE_WALKING`

**Buff Configuration:**
  * No separate JSON config - buff is defined in Java code
  * Buff icon: `BuffIndicator.STONEBLOOD`

===== String Resources =====

**English (values/strings_all.xml):**
<code xml>
<string name="StoneBloodBuff_Name">[Name]</string>
<string name="StoneBloodBuff_Info">[Description]</string>
<string name="RingOfStoneWalking_ImmuredInStone">You are immured in stone. Forever.</string>
<string name="RingOfStoneWalking_Name">Ring of Stone Blood</string>
<string name="RingOfStoneWalking_Info">[Ring description]</string>
</code>

**Russian (values-ru/strings_all.xml):**
<code xml>
<string name="StoneBloodBuff_Name">Каменная Кровь</string>
<string name="RingOfStoneWalking_ImmuredInStone">Замурован в камне. Навсегда.</string>
<string name="RingOfStoneWalking_Name">Кольцо Каменной Крови</string>
</code>

===== Lua Scripts =====

This entity is implemented entirely in Java, no Lua script exists.

===== Related Entities =====

**Item:**
  * [[en:rpd:ring_of_stone_blood_item|Ring of Stone Blood]] - The artifact ring that applies this buff

**Buffs:**
  * [[mr:artifact_buff|Artifact Buff]] - Base class for artifact buffs
  * [[mr:doom|Doom]] - Interface for doom-type buffs that affect death

**Badges:**
  * `Badges.validateDeathInStone()` - Unlocks badge when dying while affected by this buff

===== Code References =====
  * Java: [[https://github.com/NYRDS/remixed-dungeon/blob/master/RemixedDungeon/src/main/java/com/watabou/pixeldungeon/items/rings/RingOfStoneWalking.java|RingOfStoneWalking.java]]
  * Java: [[https://github.com/NYRDS/remixed-dungeon/blob/master/RemixedDungeon/src/main/java/com/nyrds/pixeldungeon/mechanics/buffs/BuffFactory.java|BuffFactory.java]]
